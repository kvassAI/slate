<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <script src="https://cdn.statuspage.io/se-v2.js"></script>
    <script src="javascripts/statuspage.js"></script>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />

    <script>
      //This is Google's default GA code
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-72924758-4', 'auto');
      ga('send', 'pageview');
      //This does hash-click tracking (inspired by http://stackoverflow.com/a/4813223)
      $(document).ready(function() {
        $('.tocify-item a').on('click', function(){
          ga('send', 'pageview', {'page': location.pathname + location.search  + location.hash});
        });
      });
      </script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='mailto:hello@kvass.ai'>Contact us for a Developer Key</a></li>
            <li><a href='https://github.com/lord/slate'>Documentation Powered by Slate</a></li>
            <li><a href="http://status.kvass.ai" target="_blank"><span class="color-dot"></span><span class="color-description"></span></a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="introduction">Introduction</h1>

<p>The KVASS API is a standard JSON RESTful API. The API follows the HTTP standards as often as possible, but there might be some deviations from it in some specific scenarios.</p>

<p>All responses from the API, including errors, are returned as JSON objects.</p>

<p>The API is separated into 2 different environments:</p>

<table><thead>
<tr>
<th>Environment</th>
<th>Endpoint</th>
</tr>
</thead><tbody>
<tr>
<td><strong>QA</strong></td>
<td>qa.kvass.ai</td>
</tr>
<tr>
<td><strong>PROD</strong></td>
<td>api.kvass.ai</td>
</tr>
</tbody></table>

<p>Each environment has its separate API keys which you can manage through our Admin dashboard.</p>

<p>All the example API calls are using the PROD endpoint.</p>

<h2 id="authentication">Authentication</h2>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code class="prettyprint">&lt;kvass-api-key&gt;</code> with your API key.</p>
</blockquote>

<p>KVASS uses API keys to allow access to the API. If you want access to our APIs, please get in touch through our <a href="https://www.kvass.ai/">website</a>.</p>

<p>All API requests should include this key in the headers*:</p>

<p><code class="prettyprint">X-Kvass-Api-Key: &lt;kvass-api-key&gt;</code></p>

<aside class="notice">
*Note:  You must replace <code>kvass-api-key</code> with your personal API key.
</aside>

<h2 id="errors">Errors</h2>

<aside class="notice">The errors below might change slightly between API calls</aside>

<p>The KVASS API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Reason</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Your request is malformed or missing mandatory data.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
<td>Your API key is either wrong, missing or you have no permissions for this request.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
<td>Your request is trying to access data it has no credentials for</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
<td>The specified resource could not be found.</td>
</tr>
<tr>
<td>409</td>
<td>Conflict</td>
<td>There was a conflict with processing your request. Try later or change the data being submitted</td>
</tr>
<tr>
<td>415</td>
<td>Unsupported Media Type</td>
<td>The requests&rsquo; payload is in a format that is not supported by this method on the target resource.</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error</td>
<td>We had a problem with our server. Please try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable</td>
<td>We&rsquo;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

<h2 id="expanding-objects">Expanding objects</h2>

<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/payment_methods/&lt;payment-method-id&gt;/?expand=user</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"masked_card_number"</span><span class="p">:</span><span class="s2">"XXXXXXXXXXXX1234"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Many response objects will contain IDs for related objects in the response. For example, an Order might have a User ID associated. If you want to expand the actual user information, you can use the <code class="prettyprint">expand</code> query parameter.</p>

<p>You can also nest expand requests with the dot property. For example, requesting payments.payment_method on an order will expand the payments property into a list of Payment objects, and will then expand the payment method property into a full Payment Method object.</p>

<p>You can expand multiple objects at once by identifying multiple items
in the expand array, separated with commas.</p>

<p>For example:</p>

<p><code class="prettyprint">GET /orders/&lt;order-id&gt;/?expand=user,provider,items.product</code></p>

<h2 id="common-object-fields">Common Object fields</h2>

<p>Here&rsquo;s a list of fields which you will see often in the API responses:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>created</td>
<td>Date when object was created</td>
</tr>
<tr>
<td>modified</td>
<td>Date when object was last modified</td>
</tr>
<tr>
<td>deleted</td>
<td>Flag that shows if object has been deleted</td>
</tr>
<tr>
<td>active</td>
<td>Flag that shows if object is active</td>
</tr>
<tr>
<td>company</td>
<td>Company associated with object</td>
</tr>
<tr>
<td>user</td>
<td>User associated with object</td>
</tr>
</tbody></table>

<h2 id="pagination">Pagination</h2>

<blockquote>
<p>Example request using <code class="prettyprint">size</code> and <code class="prettyprint">page</code>:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/orders?size=10&amp;page=1</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<blockquote>
<p>Example request using only <code class="prettyprint">size</code>:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/orders?size=100</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
<span class="na">X-Pagination-Total</span><span class="p">:</span> <span class="s">212</span>
</code></pre>
<p>All top-level API resources have support for bulk fetches via &ldquo;list&rdquo; API methods. For instance you can list orders, users, providers, etc.
These &ldquo;list&rdquo; API methods share a common structure, taking at least these two parameters: size and page.</p>

<p>KVASS uses pagination based on a page size (<code class="prettyprint">size</code>) and current page (<code class="prettyprint">page</code>). With these parameters you can retrieve the data the way you need and display it using your own pagination scheme.
The return of a response header contains the total count: <code class="prettyprint">X-Pagination-Total: 212</code></p>

<h2 id="retrieve-items">Retrieve items</h2>

<p>The models (<a href="#users">Users</a>, <a href="#invoices">Invoices</a>, <a href="#issuers">Issuers</a>, etc.)
describe below can be retrieve by two different ways, <em>searching</em> or an usual GET api call.</p>

<p>In both ways, you can use pagination, sorting, and filter the results by date to navigate big lists.
Additionally, the search method is using the argument <code class="prettyprint">query</code>.
Each model that has the ability to do search will be explained more thoroughly their respective chapters,
but all the models have search by <code class="prettyprint">ID</code> in common.</p>

<blockquote>
<p>Definition GET</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/model
</code></pre>
<blockquote>
<p>Example GET request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/model</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"a0b1c2d3e4d5c6b7a8b94242"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15db70e2a10acb65362"</span><span class="p">},</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<blockquote>
<p>Definition SEARCH</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/model/search
</code></pre>
<blockquote>
<p>Example SEARCH request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/model/search?query=a0b1c2d3e4d5c6b7a8b94242</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"a0b1c2d3e4d5c6b7a8b94242"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15db70e2a10acb65362"</span><span class="p">},</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th></th>
<th>Types</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Filter by date</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results. <em>default is created</em></td>
</tr>
<tr>
<td><strong>Pagination</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 0</em></td>
</tr>
<tr>
<td><strong>Sorting</strong></td>
<td></td>
<td></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Model specific attributes for sorting results</td>
</tr>
</tbody></table>

<h3 id="getting-list-of-models">Getting list of models</h3>

<p>The <code class="prettyprint">Get</code> method allows you to retrieve all items from a model in a list.
Some models give you additional arguments for filter the requests (e.g: status filter).</p>

<table><thead>
<tr>
<th></th>
<th>Invoices</th>
<th>Issuers</th>
<th>Orders</th>
<th>Payments</th>
<th>Products</th>
<th>Providers</th>
<th>Users</th>
<th>Resources</th>
</tr>
</thead><tbody>
<tr>
<td><em>Filter by date</em></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><em>Pagination</em></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><em>Sorting</em></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
</tbody></table>

<h3 id="search-on-model">Search on model</h3>

<p>The <code class="prettyprint">Search</code> method is an advanced type of the <code class="prettyprint">Get</code> request.
This is because the results depend on the query.
This method allows you to retrieve a list of items matching with a search query,
like <code class="prettyprint">user name</code> or <code class="prettyprint">account_number</code>, without specifying that you are searching for
<code class="prettyprint">user name</code> or <code class="prettyprint">account_number</code>.</p>

<table><thead>
<tr>
<th></th>
<th>Invoices</th>
<th>Issuers</th>
<th>Orders</th>
<th>Payments</th>
<th>Products</th>
<th>Providers</th>
<th>Users</th>
<th>Resources</th>
</tr>
</thead><tbody>
<tr>
<td><em>Filter by date</em></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><em>Pagination</em></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
<tr>
<td><em>Sorting</em></td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
</tr>
</tbody></table>

<h1 id="authorization">Authorization</h1>

<p>Our API uses OAuth2 and JWT tokens for authorizing Users.</p>

<blockquote>
<p>OAuth 2.0 is the industry-standard protocol for authorization</p>

<p>JSON Web Tokens are an open, industry standard RFC 7519 method for representing claims securely between two parties</p>
</blockquote>

<p>We have support for a variety of authentication providers, including <a href="https://auth0.com/">Auth0</a>, <a href="https://firebase.google.com/docs/auth/">Google Firebase</a>, <a href="https://docs.aws.amazon.com/cognito/latest/developerguide/what-is-amazon-cognito.html">Amazon&rsquo;s Cognito</a> or even your own authentication mechanism. Each of these provides different Identity Providers such as Facebook, Google, Email and password, etc.</p>

<p>Regardless of the provider you decide to go for, in order to authorize a user on the API side, we use the <a href="https://jwt.io/">JWT tokens</a> given by those same authentication providers. These have to be added to all requests using the following header:</p>

<p><code class="prettyprint">Authorization: Bearer &lt;jwt&gt;</code></p>

<p>OAuth2 is an industry-standard protocol for authorization, so if you need more information on how to use/implement it, you can find various resources online. However, here are a few good starting points:</p>

<ul>
<li><a href="https://tools.ietf.org/html/rfc6749">OAuth2 Spec - RFC6749</a></li>
<li><a href="http://oauthbible.com/">OAuth Bible</a></li>
<li><a href="https://auth0.com/docs/protocols/oauth2">Auth0 - OAuth 2.0</a></li>
</ul>

          <h1 id="addresses">Addresses</h1>

<p>Address is the class which structures all addresses used by <a href="@users"><code class="prettyprint">User</code></a>, <a href="@providers"><code class="prettyprint">Provider</code></a> 
and the delivery system (pickup and drop off).</p>

<h2 id="address-object">Address Object</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>street_name</td>
<td><code class="prettyprint">string</code></td>
<td>The street name of Address</td>
</tr>
<tr>
<td>building</td>
<td><code class="prettyprint">string</code></td>
<td>The building number of Address</td>
</tr>
<tr>
<td>zip_code</td>
<td><code class="prettyprint">string</code></td>
<td>The zip code of Address</td>
</tr>
<tr>
<td>city</td>
<td><code class="prettyprint">string</code></td>
<td>The city of Address</td>
</tr>
<tr>
<td>country</td>
<td><code class="prettyprint">string</code></td>
<td>The country of Address</td>
</tr>
<tr>
<td>geo</td>
<td><code class="prettyprint">array</code></td>
<td>The geo position of Address</td>
</tr>
<tr>
<td>raw</td>
<td><code class="prettyprint">object</code></td>
<td>All information like address, country, zip code, etc&hellip; from service</td>
</tr>
<tr>
<td>alias</td>
<td><code class="prettyprint">string</code></td>
<td>The alias of Address</td>
</tr>
<tr>
<td>service</td>
<td><code class="prettyprint">string</code></td>
<td>The service used for Address <em>default google</em></td>
</tr>
</tbody></table>

<h3 id="service">service</h3>

<table><thead>
<tr>
<th>Possibilities</th>
</tr>
</thead><tbody>
<tr>
<td>google</td>
</tr>
<tr>
<td>pca</td>
</tr>
</tbody></table>

<h2 id="retrieves-an-address">Retrieves an Address</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/addresses/lookup
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/addresses/lookup</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"service_address_id"</span><span class="p">:</span><span class="s2">"ChIJR0HKYoduQUYRkho1K1zkZpA"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Norway"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0160"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Tordenskiolds gate 3"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"geo"</span><span class="p">:[</span><span class="w">
      </span><span class="mf">59.9131976</span><span class="p">,</span><span class="w">
      </span><span class="mf">10.7361056</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"raw"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"address_components"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"street_number"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"short_name"</span><span class="p">:</span><span class="s2">"3"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"long_name"</span><span class="p">:</span><span class="s2">"3"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"route"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"short_name"</span><span class="p">:</span><span class="s2">"Tordenskiolds gate"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"long_name"</span><span class="p">:</span><span class="s2">"Tordenskiolds gate"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"political"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"sublocality"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"sublocality_level_1"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"short_name"</span><span class="p">:</span><span class="s2">"Sentrum"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"long_name"</span><span class="p">:</span><span class="s2">"Sentrum"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"postal_town"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"short_name"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"long_name"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"administrative_area_level_2"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"political"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"short_name"</span><span class="p">:</span><span class="s2">"Oslo kommune"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"long_name"</span><span class="p">:</span><span class="s2">"Oslo kommune"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"administrative_area_level_1"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"political"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"short_name"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"long_name"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"country"</span><span class="p">,</span><span class="w">
               </span><span class="s2">"political"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"short_name"</span><span class="p">:</span><span class="s2">"NO"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"long_name"</span><span class="p">:</span><span class="s2">"Norway"</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
               </span><span class="s2">"postal_code"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"short_name"</span><span class="p">:</span><span class="s2">"0160"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"long_name"</span><span class="p">:</span><span class="s2">"0160"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"formatted_address"</span><span class="p">:</span><span class="s2">"Tordenskiolds gate 3, 0160 Oslo, Norway"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"types"</span><span class="p">:[</span><span class="w">
         </span><span class="s2">"premise"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"geometry"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"location_type"</span><span class="p">:</span><span class="s2">"ROOFTOP"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"location"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"lat"</span><span class="p">:</span><span class="mf">59.9131976</span><span class="p">,</span><span class="w">
            </span><span class="s2">"lng"</span><span class="p">:</span><span class="mf">10.7361056</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="s2">"viewport"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"northeast"</span><span class="p">:{</span><span class="w">
               </span><span class="s2">"lat"</span><span class="p">:</span><span class="mf">59.9145465802915</span><span class="p">,</span><span class="w">
               </span><span class="s2">"lng"</span><span class="p">:</span><span class="mf">10.7374546302915</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"southwest"</span><span class="p">:{</span><span class="w">
               </span><span class="s2">"lat"</span><span class="p">:</span><span class="mf">59.91184861970849</span><span class="p">,</span><span class="w">
               </span><span class="s2">"lng"</span><span class="p">:</span><span class="mf">10.7347566697085</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="s2">"bounds"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"northeast"</span><span class="p">:{</span><span class="w">
               </span><span class="s2">"lat"</span><span class="p">:</span><span class="mf">59.91333940000001</span><span class="p">,</span><span class="w">
               </span><span class="s2">"lng"</span><span class="p">:</span><span class="mf">10.736447</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"southwest"</span><span class="p">:{</span><span class="w">
               </span><span class="s2">"lat"</span><span class="p">:</span><span class="mf">59.91305579999999</span><span class="p">,</span><span class="w">
               </span><span class="s2">"lng"</span><span class="p">:</span><span class="mf">10.7357643</span><span class="w">
            </span><span class="p">}</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"place_id"</span><span class="p">:</span><span class="s2">"ChIJR0HKYoduQUYRkho1K1zkZpA"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>service</td>
<td><code class="prettyprint">string</code></td>
<td>Chose the service you want use</td>
</tr>
<tr>
<td>type</td>
<td><code class="prettyprint">string</code></td>
<td>Define the type of your search, if it&rsquo;s street name, zip code, etc</td>
</tr>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Query is what you want to search for e.g.: &ldquo;Tordenskioldsgate 3, Oslo&rdquo;</td>
</tr>
</tbody></table>

          <h1 id="coupons">Coupons</h1>

<p>Coupons are a great way to offer discounts or vouchers to your Customers. They can be used together with multiple business models: Orders, Invoices and Subscriptions.</p>

<h2 id="coupon-object">Coupon Object</h2>

<table><thead>
<tr>
<th>Attributes</th>
<th>Types</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Name of the coupon</td>
</tr>
<tr>
<td><strong>code</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The code to be used by a costumer. By default, the code is automatically generated (a string of 6 characters long, e.g: Nz42kL), but you can also create our own.</td>
</tr>
<tr>
<td>percent_off</td>
<td><code class="prettyprint">number</code></td>
<td>The discount percentage, should be between <code class="prettyprint">0.</code> and <code class="prettyprint">1.</code>, for example: 0.2 means 20% of the total amount.</td>
</tr>
<tr>
<td>amount_off</td>
<td><code class="prettyprint">number</code></td>
<td>Discount amount, for example: 100.50, means that the next payment will be decreased by 100.50.</td>
</tr>
<tr>
<td>currency</td>
<td><code class="prettyprint">string</code></td>
<td>ISO 4217 code of currency, for example: &ldquo;EUR&rdquo;</td>
</tr>
<tr>
<td>starting_date</td>
<td><code class="prettyprint">object</code></td>
<td>Define when can the coupon start being used. By default, it&rsquo;ll start at the time of creation, but it could be defined for the future. If defined in the future, it means the coupon could not be used before the <code class="prettyprint">starting_date</code>, <code class="prettyprint">timestamp</code> format. <em>Default <code class="prettyprint">now</code></em></td>
</tr>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">object</code></td>
<td>The date when the coupon will stop being available. <code class="prettyprint">timestamp</code> format.</td>
</tr>
<tr>
<td>max_redemptions</td>
<td><code class="prettyprint">integer</code></td>
<td>The number of times a coupon can be used. When the <code class="prettyprint">used_count</code> is equal to the <code class="prettyprint">max_redemption</code> then the coupon becomes unusable.</td>
</tr>
<tr>
<td>used_count</td>
<td><code class="prettyprint">integer</code></td>
<td>Automatically incremented by each use.</td>
</tr>
</tbody></table>

<p>As you can see, there are two type of discount: percent_off and amount_off.
It&rsquo;s important to remember: a coupon can only have one of them at the same time.
But if you want to change the type of discount you can do it easily with a <code class="prettyprint">PUT coupons/&lt;coupon_id&gt;</code> (There is an example <a href="#switch-the-discount-type">here</a>)
<br/>
<aside class="notice">
There are 3 different ways a Coupon can become unusable:
 <br/>- When the <code class="prettyprint">ending_date</code> is the current date
 <br/>- When the <code class="prettyprint">max_redemptions</code> is reached
 <br/>- It&rsquo;s also possible to combine <code class="prettyprint">ending_date</code> and <code class="prettyprint">max_redemptions</code>. In that case, the coupon will become unsuable if <code class="prettyprint">max_redemptions</code> is reached or at the <code class="prettyprint">ending_date</code>.
</aside></p>

<h2 id="create-a-coupon">Create a Coupon</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/coupons
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/coupons</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new coupon"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUMMER2018shirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"percent_off"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1533026949</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1533081600</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_redemption"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85222420"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T11:00:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new coupon"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUMMER2018shirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"percent_off"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-1T12:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_redemption"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
    </span><span class="s2">"used_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new Coupon.</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>Types</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Name of the coupon</td>
</tr>
<tr>
<td><strong>code</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The code to be used by a costumer. By default, the code is automatically generated (a string of 6 characters long, e.g: Nz42kL), but you can also create our own.</td>
</tr>
<tr>
<td>percent_off</td>
<td><code class="prettyprint">number</code></td>
<td>The discount percentage, should be between <code class="prettyprint">0.</code> and <code class="prettyprint">1.</code>, for example: 0.2 means 20% of the total amount.</td>
</tr>
<tr>
<td>amount_off</td>
<td><code class="prettyprint">number</code></td>
<td>Discount amount, for example: 100.50, means that the next payment will be decreased by 100.50.</td>
</tr>
<tr>
<td>currency</td>
<td><code class="prettyprint">string</code></td>
<td>ISO 4217 code of currency, for example: &ldquo;EUR&rdquo;</td>
</tr>
<tr>
<td>starting_date</td>
<td><code class="prettyprint">object</code></td>
<td>Define when can the coupon start being used. By default, it&rsquo;ll start at the time of creation, but it could be defined for the future. If defined in the future, it means the coupon could not be used before the <code class="prettyprint">starting_date</code>, <code class="prettyprint">timestamp</code> format. <em>Default <code class="prettyprint">now</code></em></td>
</tr>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">object</code></td>
<td>The date when the coupon will stop being available. <code class="prettyprint">timestamp</code> format.</td>
</tr>
<tr>
<td>max_redemptions</td>
<td><code class="prettyprint">integer</code></td>
<td>The number of times a coupon can be used. When the <code class="prettyprint">used_count</code> is equal to the <code class="prettyprint">max_redemption</code> then the coupon becomes unusable.</td>
</tr>
</tbody></table>

<h2 id="get-a-coupon">Get a Coupon</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/coupons/&lt;coupon_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/coupons/&lt;coupon_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85222420"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new coupon"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUMMER2018shirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"percent_off"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-1T12:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_redemption"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
    </span><span class="s2">"used_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves a Coupon with a given ID.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>coupon_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried Coupon</td>
</tr>
</tbody></table>

<h2 id="list-all-coupon">List all Coupon</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/coupons
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/coupons</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85222420"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new coupon"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUMMER2018shirt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"percent_off"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-1T12:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_redemption"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
        </span><span class="s2">"used_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85222421"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Second coupon"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AVx46pp"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"amount_off"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_redemption"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
        </span><span class="s2">"used_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all Coupons associated with the company.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <em>default sorting is <code class="prettyprint">-due_date</code></em>.</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Status of Coupons (<code class="prettyprint">active</code>). By default there is no value, the API returns coupons regardless the status.</td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">integer</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">integer</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
</tbody></table>

<h2 id="coupons-search">Coupons Search</h2>

<p>Retrieves a list of Coupons associate with the company.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/coupons/search
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/coupons/search/query=SUMMER</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85222420"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new coupon"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUMMER2018shirt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"percent_off"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w">
        </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-1T12:00:00.000Z"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"max_redemption"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
        </span><span class="s2">"used_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>What you want to search, like <strong>id</strong>, <strong>name</strong>, or <strong>code</strong></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>number of items to retrieve</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>which page to retrieve. <em>default page size is 10</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>field used for sorting results. If missing default is &ldquo;-created&rdquo;. Could be other parameters in the Invoice model, like &ldquo;-created&rdquo; or &ldquo;status&rdquo;.</td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted invoices are also listed. <em>default is <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

<h2 id="update-a-coupon">Update a Coupon</h2>

<p>Updates an Invoice with a given ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/coupons/&lt;coupon_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/coupons/&lt;coupon_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Summer should pass"</span><span class="w">    
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85222420"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Summer should pass"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUMMER2018shirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"percent_off"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-1T12:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_redemption"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
    </span><span class="s2">"used_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>coupon_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the Coupon</td>
</tr>
<tr>
<td><strong>name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Name of the coupon</td>
</tr>
<tr>
<td><strong>code</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The code to be used by a costumer. By default, the code is automatically generated (a string of 6 characters long, e.g: Nz42kL), but you can also create our own.</td>
</tr>
<tr>
<td>percent_off</td>
<td><code class="prettyprint">number</code></td>
<td>The discount percentage, should be between <code class="prettyprint">0.</code> and <code class="prettyprint">1.</code>, for example: 0.2 means 20% of the total amount.</td>
</tr>
<tr>
<td>amount_off</td>
<td><code class="prettyprint">number</code></td>
<td>Discount amount, for example: 100.50, means that the next payment will be decreased by 100.50.</td>
</tr>
<tr>
<td>currency</td>
<td><code class="prettyprint">string</code></td>
<td>ISO 4217 code of currency, for example: &ldquo;EUR&rdquo;</td>
</tr>
<tr>
<td>starting_date</td>
<td><code class="prettyprint">object</code></td>
<td>Define when can the coupon start being used. By default, it&rsquo;ll start at the time of creation, but it could be defined for the future. If defined in the future, it means the coupon could not be used before the <code class="prettyprint">starting_date</code>, <code class="prettyprint">timestamp</code> format. <em>Default <code class="prettyprint">now</code></em></td>
</tr>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">object</code></td>
<td>The date when the coupon will stop being available. <code class="prettyprint">timestamp</code> format.</td>
</tr>
<tr>
<td>max_redemptions</td>
<td><code class="prettyprint">integer</code></td>
<td>The number of times a coupon can be used. When the <code class="prettyprint">used_count</code> is equal to the <code class="prettyprint">max_redemption</code> then the coupon becomes unusable.</td>
</tr>
<tr>
<td>used_count</td>
<td><code class="prettyprint">integer</code></td>
<td>Automatically incremented by each use.</td>
</tr>
</tbody></table>

<h3 id="switch-the-discount-type">Switch The Discount Type</h3>

<p>In the example we assume the coupon <code class="prettyprint">57ee9c72d76d431f85222420</code> has a <code class="prettyprint">percent_off</code> discount type, and we are going to change its type to <code class="prettyprint">amount_off</code>.
<br/>To do it you just have to put <code class="prettyprint">amount_off</code> and the value in the data, of course you can do the reverse as well, change the <code class="prettyprint">amount_off</code> to the <code class="prettyprint">percent_off</code> type.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/coupons/&lt;coupon_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/coupons/&lt;coupon_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"amount_off"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85222420"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Summer should pass"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUMMER2018shirt"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount_off"</span><span class="p">:</span><span class="w"> </span><span class="mi">2500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-31T10:50:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-08-1T12:00:00.000Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_redemption"</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span><span class="p">,</span><span class="w">
    </span><span class="s2">"used_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="delete-a-coupon">Delete a Coupon</h2>

<p>Deletes an coupon with a give ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE https://api.kvass.ai/coupons/&lt;coupon_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/coupons/&lt;coupon_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>coupon_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the Coupon</td>
</tr>
</tbody></table>

          <h1 id="events">Events</h1>

<p>The events are a way of tracking any important activity on the API
and keeping a history of transactions on your data.</p>

<h2 id="event-object">Event Object</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><code class="prettyprint">object</code></td>
<td>The event ID.</td>
</tr>
<tr>
<td><strong>kind</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The kind of event. Can be any from the <a href="#list-of-event-types"><code class="prettyprint">event type list</code></a></td>
</tr>
<tr>
<td>data</td>
<td><code class="prettyprint">object</code></td>
<td>An object containing the event kind, timestamp and any additional data necessary</td>
</tr>
<tr>
<td>author</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#users"><code class="prettyprint">User</code></a> which triggers the event</td>
</tr>
</tbody></table>

<h2 id="get-all-events">Get All Events</h2>

<p>Receives a list of all events.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/events
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/events</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"addresses"</span><span class="p">:[],</span><span class="w">
                      </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
                      </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
                      </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
                      </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">true</span><span class="w">
                  </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of subscriptions per page <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve <em>default is 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used to sort results <em>default is <code class="prettyprint">-created</code></em></td>
</tr>
</tbody></table>

<h2 id="receive-event-by-id">Receive Event by ID</h2>

<p>Receive an event, based on its ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/events/&lt;event_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/events/5964a0ead57ba2036750a3b4</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"data"</span><span class="w"> </span><span class="p">{</span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                  </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
                  </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
                  </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
                  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"addresses"</span><span class="p">:[],</span><span class="w">
                  </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
                  </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
                  </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
                  </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                  </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
                  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">true</span><span class="w">
              </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="events-search">Events Search</h2>

<p>Retrieves a list of Events associated with search.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/events/search
</code></pre>
<blockquote>
<p>Example request by account_number:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/events/search/query=order</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"addresses"</span><span class="p">:[],</span><span class="w">
                      </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
                      </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
                      </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
                      </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">true</span><span class="w">
                  </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.updated"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.updated"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"author"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                      </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"addresses"</span><span class="p">:[],</span><span class="w">
                      </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
                      </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
                      </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
                      </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                      </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
                      </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">true</span><span class="w">
                  </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>What you want to search, like <strong>id</strong> or <strong>kind</strong></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>number of items to retrieve</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>which page to retrieve. <em>default page size is 10</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>field used for sorting results. If missing default is &ldquo;-created&rdquo;</td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
</tbody></table>

<h2 id="list-of-event-types">List of Event Types</h2>

<table><thead>
<tr>
<th>Model name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">order.created</code></td>
<td>Order created</td>
</tr>
<tr>
<td><code class="prettyprint">order.updated</code></td>
<td>Order updated</td>
</tr>
<tr>
<td><code class="prettyprint">order.cancelled</code></td>
<td>Order cancelled</td>
</tr>
<tr>
<td><code class="prettyprint">invoice.created</code></td>
<td>Invoice created</td>
</tr>
<tr>
<td><code class="prettyprint">invoice.updated</code></td>
<td>Invoice updated</td>
</tr>
<tr>
<td><code class="prettyprint">invoice.deleted</code></td>
<td>Invoice deleted</td>
</tr>
<tr>
<td><code class="prettyprint">user.created</code></td>
<td>User created</td>
</tr>
<tr>
<td><code class="prettyprint">user.updated</code></td>
<td>User updated</td>
</tr>
<tr>
<td><code class="prettyprint">user.deleted</code></td>
<td>User deleted</td>
</tr>
<tr>
<td><code class="prettyprint">subscription.created</code></td>
<td>Subscription created</td>
</tr>
<tr>
<td><code class="prettyprint">subscription.updated</code></td>
<td>Subscription updated</td>
</tr>
<tr>
<td><code class="prettyprint">subscription.deleted</code></td>
<td>Subscription deleted</td>
</tr>
<tr>
<td><code class="prettyprint">subscription.activated</code></td>
<td>Subscription activated</td>
</tr>
<tr>
<td><code class="prettyprint">subscription.future</code></td>
<td>Subscription postponed</td>
</tr>
<tr>
<td><code class="prettyprint">subscription.completed</code></td>
<td>Subscription completed</td>
</tr>
<tr>
<td><code class="prettyprint">subscription.non_renewing</code></td>
<td>Subscription stopping the next cycle</td>
</tr>
<tr>
<td><code class="prettyprint">subscription.cancelled</code></td>
<td>Subscription cancelled</td>
</tr>
<tr>
<td><code class="prettyprint">payment.created</code></td>
<td>Payment created</td>
</tr>
<tr>
<td><code class="prettyprint">payment.updated</code></td>
<td>Payment updated</td>
</tr>
<tr>
<td><code class="prettyprint">payment.deleted</code></td>
<td>Payment deleted</td>
</tr>
<tr>
<td><code class="prettyprint">payment.succeeded</code></td>
<td>Payment succeeded</td>
</tr>
<tr>
<td><code class="prettyprint">payment.processing</code></td>
<td>Payment processing</td>
</tr>
<tr>
<td><code class="prettyprint">payment.failed</code></td>
<td>Payment failed</td>
</tr>
<tr>
<td><code class="prettyprint">payment.captured</code></td>
<td>Payment captured</td>
</tr>
<tr>
<td><code class="prettyprint">payment.cancelled</code></td>
<td>Payment cancelled</td>
</tr>
</tbody></table>

          <h1 id="invoices">Invoices</h1>

<p>Invoices allow you to store invoice information for later payment or accounting information sent by a provider of a product or service to the <a href="#users"><code class="prettyprint">User</code></a>]. </p>

<h2 id="invoice-object">Invoice object</h2>

<table><thead>
<tr>
<th>Attributes</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>user</strong></td>
<td><code class="prettyprint">object</code></td>
<td><a href="#users"><code class="prettyprint">User</code></a> associated with invoice</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td><code class="prettyprint">number</code></td>
<td>The invoice amount. Two decimals.</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ISO 4217 code of currency, for example: &ldquo;EUR&rdquo;</td>
</tr>
<tr>
<td><strong>account_number</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Account number of the issuer that will receive the payment.</td>
</tr>
<tr>
<td>due_date</td>
<td><code class="prettyprint">object</code></td>
<td>The due date of the invoice, <code class="prettyprint">timestamp</code> format</td>
</tr>
<tr>
<td>issued_date</td>
<td><code class="prettyprint">object</code></td>
<td>The date the invoice was generated, <code class="prettyprint">timestamp</code> format</td>
</tr>
<tr>
<td>message</td>
<td><code class="prettyprint">string</code></td>
<td>Message (KID) used for paying the invoice as it will appear in the issuer&rsquo;s bank</td>
</tr>
<tr>
<td>issuer</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#issuers"><code class="prettyprint">Issuer</code></a> of the invoice</td>
</tr>
<tr>
<td>issuer_alias</td>
<td><code class="prettyprint">string</code></td>
<td>The user may want to use an alias for the <a href="#issuers"><code class="prettyprint">issuer</code></a></td>
</tr>
<tr>
<td>image_url</td>
<td><code class="prettyprint">string</code></td>
<td>The url for the image of the invoice that is returned from the ocr</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>The status of the Invoice. Default is CREATED. Additionally there are: &ldquo;SCHEDULED&rdquo;, &ldquo;DONE&rdquo;, &ldquo;FAILED&rdquo; and &ldquo;CANCELLED&rdquo;</td>
</tr>
<tr>
<td>payments</td>
<td><code class="prettyprint">array</code></td>
<td>List of <a href="#payments"><code class="prettyprint">Payment</code></a> objects associated with invoice.</td>
</tr>
<tr>
<td>invoice_lines</td>
<td><code class="prettyprint">array</code></td>
<td>An array of <a href="#invoice-lines"><code class="prettyprint">invoice lines</code></a></td>
</tr>
<tr>
<td>fee</td>
<td><code class="prettyprint">float</code></td>
<td>Additional fee that will be added to the <code class="prettyprint">amount</code></td>
</tr>
<tr>
<td>kind</td>
<td><code class="prettyprint">string</code></td>
<td>The type or kind of invoice.</td>
</tr>
<tr>
<td>deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>Whether the invoice is deleted or not. <em>Default is <code class="prettyprint">false</code></em></td>
</tr>
<tr>
<td>accounting_reference</td>
<td><code class="prettyprint">string</code></td>
<td>A reference ID from your Accounting system.</td>
</tr>
<tr>
<td>external_reference</td>
<td><code class="prettyprint">string</code></td>
<td>Field to set your own reference or if you are using a third party.</td>
</tr>
</tbody></table>

<p>If your company is using an Account system supported by KVASS this field will be automatically setup.</p>

<h2 id="invoice-lines">Invoice Lines</h2>

<p>Invoice lines are additional information it is possible to append to an invoice. 
Each line has the format presented bellow.</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><em>description</em></td>
<td><code class="prettyprint">string</code></td>
<td>Description of unit. <em>Required field</em></td>
</tr>
<tr>
<td><em>quantity</em></td>
<td><code class="prettyprint">number</code></td>
<td>Quantity of unit <code class="prettyprint">product</code> or <code class="prettyprint">resource</code>. <em>Default is 1</em></td>
</tr>
<tr>
<td><em>amount</em></td>
<td><code class="prettyprint">float</code></td>
<td>Unit price. <em>Required field</em></td>
</tr>
<tr>
<td><em>currency</em></td>
<td><code class="prettyprint">string</code></td>
<td>Currency of the unit. ISO 4217 currency code. For example &ldquo;EUR&rdquo; <em>Required field</em></td>
</tr>
<tr>
<td>product</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#products"><code class="prettyprint">Product</code></a> in unit</td>
</tr>
<tr>
<td>resource</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#resources"><code class="prettyprint">Resource</code></a> in unit</td>
</tr>
<tr>
<td>vat</td>
<td><code class="prettyprint">float</code></td>
<td>VAT of unit. <em>From 0.0 to 1.0. Default is 0</em></td>
</tr>
</tbody></table>

<h2 id="create-an-invoice">Create an Invoice</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/invoices
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/invoices</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some transaction or KID number"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">123.45</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"due_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-10T18:25:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;image-id&gt;/&lt;image-name&gt;.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"issuer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Important Firm AS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"issuer_alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"issuer alias for Issuer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"issuer"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"due_date"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1476551410009</span><span class="p">},</span><span class="w">
   </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"Some message to the Issuer"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"user"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">123.45</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111434"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;image-id&gt;/&lt;image-name&gt;.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"invoice_lines"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
   </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new Invoice.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>amount</strong></td>
<td><code class="prettyprint">number</code></td>
<td>The amount of invoice <em>Required field</em></td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ISO 4217 code of currency: &ldquo;EUR&rdquo;, &ldquo;USD&rdquo;, &ldquo;NOK&rdquo; etc. <em>Required field</em></td>
</tr>
<tr>
<td><strong>account_number</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Account number to which payment should be submitted <em>Required field</em></td>
</tr>
<tr>
<td>due_date</td>
<td><code class="prettyprint">number</code></td>
<td>Due date of invoice, <code class="prettyprint">timestamp</code> format. <em>Default is current date if missing</em></td>
</tr>
<tr>
<td>image_url</td>
<td><code class="prettyprint">string</code></td>
<td>The url for the invoice image</td>
</tr>
<tr>
<td>issued_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date the Invoice was issued, <code class="prettyprint">timestamp</code> format. <em>Not a required field</em></td>
</tr>
<tr>
<td>issuer_alias</td>
<td><code class="prettyprint">string</code></td>
<td>Issuer alias that User could set. <em>Not a required field</em></td>
</tr>
<tr>
<td>message</td>
<td><code class="prettyprint">string</code></td>
<td>Message included on the invoice, e.g. KID number to be included with payment</td>
</tr>
<tr>
<td>invoice_lines</td>
<td><code class="prettyprint">array</code></td>
<td>An array of <a href="#invoice-lines"><code class="prettyprint">invoice lines</code></a></td>
</tr>
<tr>
<td>fee</td>
<td><code class="prettyprint">float</code></td>
<td>Fee added to the amount</td>
</tr>
<tr>
<td>kind</td>
<td><code class="prettyprint">string</code></td>
<td>The type or kind of invoice created</td>
</tr>
</tbody></table>

<h2 id="create-an-invoice-with-invoice-line">Create an Invoice with Invoice Line</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/invoices
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/invoices</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some transaction or KID number"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">123.45</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"account_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"due_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-02-10T18:25:43.511Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;image-id&gt;/&lt;image-name&gt;.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"issuer"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Important Firm AS"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"issuer_alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">"issuer alias for Issuer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"invoice_lines"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"resource"</span><span class="p">:</span><span class="w"> </span><span class="s2">"596c643ed57ba203be2cf1c9"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">200.00</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A resource"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"vat"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w">
            </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">20.00</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard Shipping"</span><span class="w">
        </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"issuer"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"due_date"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1476551410009</span><span class="p">},</span><span class="w">
   </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"Some message to the Issuer"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"user"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">123.45</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111434"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;image-id&gt;/&lt;image-name&gt;.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"invoice_lines"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">200.00</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard Shipping"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A resource"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"vat"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span><span class="p">,</span><span class="w">
            </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">20.00</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Standard Shipping"</span><span class="w">
        </span><span class="p">}</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new Invoice including invoice lines.
The following example show you how to create different invoice lines in an Invoice.
The first invoice line contains a <a href="#Resources"><code class="prettyprint">Resource</code></a> but it works the same way with a <a href="#Products"><code class="prettyprint">Product</code></a>.</p>

<h2 id="retrieve-an-invoice">Retrieve an Invoice</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/invoices/&lt;invoice_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/invoices/&lt;invoice_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"issuer"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"due_date"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1476551410009</span><span class="p">},</span><span class="w">
   </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"12313123"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"user"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">123.45</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111434"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;image-id&gt;/&lt;image-name&gt;.jpg"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"invoice_lines"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves an Invoice with a given ID.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoice_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried invoice</td>
</tr>
</tbody></table>

<h2 id="list-all-invoices">List all Invoices</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/invoices
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/invoices</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"issuer"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"due_date"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1476551410009</span><span class="p">},</span><span class="w">
       </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"12313123"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"user"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">123.45</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111434"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;image-id&gt;/&lt;image-name&gt;.jpg"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"invoice_lines"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all Invoices associated with the user.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <em>default sorting is <code class="prettyprint">-due_date</code></em>.</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Status of Invoice. By default there is no value, the API returns invoices regardless the status.Additionally there are : CREATED, SCHEDULED, DONE, FAILED, CANCELLED</td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
</tbody></table>

<h2 id="invoices-search">Invoices Search</h2>

<p>Retrieves a list of Invoices associate with search.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/invoices/search
</code></pre>
<blockquote>
<p>Example request by account_number:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/invoices/search/query=12345678903</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"issuer"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"due_date"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1476551410009</span><span class="p">},</span><span class="w">
       </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"12313123"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"user"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"amount"</span><span class="p">:</span><span class="mf">123.45</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111434"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;image-id&gt;/&lt;image-name&gt;.jpg"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"invoice_lines"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>What you want to search, like <strong>id</strong>, <strong>account_number</strong>, <strong>issuer name</strong>, or <strong>user name</strong></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>number of items to retrieve</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>which page to retrieve. <em>default page size is 10</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>field used for sorting results. If missing default is &ldquo;-created&rdquo;. Could be other parameters in the Invoice model, like &ldquo;-created&rdquo; or &ldquo;status&rdquo;.</td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted invoices are also listed. <em>default is <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

<h2 id="update-an-invoice">Update an Invoice</h2>

<p>Updates an Invoice with a given ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/invoices/&lt;invoice_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/invoices/&lt;invoice_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoice_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the Invoice</td>
</tr>
</tbody></table>

<h2 id="delete-invoice">Delete invoice</h2>

<p>Deletes an invoice with a give ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE https://api.kvass.ai/invoices/&lt;invoice_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/invoices/&lt;invoice_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoice_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the Invoice</td>
</tr>
</tbody></table>

          <h1 id="issuers">Issuers</h1>

<p>Issuers receive the payment for an <a href="#invoices"><code class="prettyprint">invoice</code></a>.</p>

<h2 id="issuers-object">Issuers object</h2>

<table><thead>
<tr>
<th>Attributes</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>verified</strong></td>
<td><code class="prettyprint">boolean</code></td>
<td>Flag that sets issuer object to verified. Changes to true after Anti-Money Laundering (AML) check up.</td>
</tr>
<tr>
<td><strong>blacklisted</strong></td>
<td><code class="prettyprint">boolean</code></td>
<td>Flag that sets issuer object to blacklisted. <code class="prettyprint">false</code> if AML status is either <code class="prettyprint">potential_match</code>, <code class="prettyprint">true_positive</code> or <code class="prettyprint">true_positive_approved</code>. <code class="prettyprint">true</code> if AML status value is either <code class="prettyprint">no_match</code>, <code class="prettyprint">false_positive</code> or <code class="prettyprint">true_positive_reject</code>.</td>
</tr>
<tr>
<td>comments</td>
<td><code class="prettyprint">string</code></td>
<td>Add a comment about issuer.</td>
</tr>
<tr>
<td>account_number</td>
<td><code class="prettyprint">string</code></td>
<td>Account number of issuer, used when using invoices.</td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>Name of issuer.</td>
</tr>
<tr>
<td>logo_url</td>
<td><code class="prettyprint">string</code></td>
<td>Path to logo for issuer.</td>
</tr>
<tr>
<td>address</td>
<td><code class="prettyprint">object</code></td>
<td>Billing <a href="#address"><code class="prettyprint">address</code></a> for the issuer.</td>
</tr>
<tr>
<td>is_message_mandatory</td>
<td><code class="prettyprint">boolean</code></td>
<td>Flag that determines if <code class="prettyprint">message</code> field is mandatory for invoices issued by this issuer, e.g. KID number required.</td>
</tr>
</tbody></table>

<h2 id="create-an-issuer">Create an Issuer</h2>

<p>Create a new issuer.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/issuers
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/issuers</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"account_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"issuer name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;logo-url.png&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"comments"</span><span class="p">:</span><span class="w"> </span><span class="s2">"It is a comment"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">  
   </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1490967111428</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1490967111446</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"issuer name"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"comments"</span><span class="p">:</span><span class="s2">"It is a comment"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"blacklisted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"is_message_mandatory"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"verified"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"logo_url"</span><span class="p">:</span><span class="s2">"&lt;logo-url.png&gt;"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>verified</strong></td>
<td><code class="prettyprint">boolean</code></td>
<td>Flag that sets issuer object to verified. <em>default <code class="prettyprint">false</code></em></td>
</tr>
<tr>
<td><strong>blacklisted</strong></td>
<td><code class="prettyprint">boolean</code></td>
<td>Flag that sets issuer object to blacklisted. <em>default <code class="prettyprint">false</code></em></td>
</tr>
<tr>
<td><strong>account_number</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Account number to issuer, must contain 11 digits.</td>
</tr>
<tr>
<td>comments</td>
<td><code class="prettyprint">string</code></td>
<td>Comments regarding the issuer.</td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>Name of Issuer.</td>
</tr>
<tr>
<td>logo_url</td>
<td><code class="prettyprint">string</code></td>
<td>The URL of the issuer&rsquo;s logo.</td>
</tr>
<tr>
<td>address</td>
<td><code class="prettyprint">object</code></td>
<td>Billing <a href="#address"><code class="prettyprint">address</code></a> for the issuer.</td>
</tr>
<tr>
<td>is_messaging_mandatory</td>
<td><code class="prettyprint">boolean</code></td>
<td>Determines if <em>message</em> field is mandatory for invoices issued by this issuer, e.g. KID number required. <em>default <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

<h2 id="retrieve-an-issuer">Retrieve an Issuer</h2>

<p>Retrieves issuer with a particular ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/issuers/&lt;issuer-id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/issuers/&lt;issuer-id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"blacklisted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Big Company Inc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"account_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;logo-url.png&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Money Lane 99"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"google"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOR"</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="s2">"is_message_mandatory"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1491141845656</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1491141845653</span><span class="w">
    </span><span class="p">},</span><span class="w"> 
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>issuer_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried issuer</td>
</tr>
</tbody></table>

<h2 id="list-all-issuers">List all Issuers</h2>

<p>Retrieves a list of all issuers.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/issuers
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/issuers</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"is_message_mandatory"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"blacklisted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;logo-url.png&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err"></span><span class="w">
            </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Money Lane 99"</span><span class="p">,</span><span class="err"></span><span class="w">
            </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="err"></span><span class="w">
            </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"google"</span><span class="p">,</span><span class="err"></span><span class="w">
            </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="err"></span><span class="w">
            </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="err"></span><span class="w">
            </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOR"</span><span class="err"></span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1491142545321</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1491142545323</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"verified"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Big Company Inc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>active</td>
<td><code class="prettyprint">boolean</code></td>
<td>Active issuers are also listed</td>
</tr>
<tr>
<td>verified</td>
<td><code class="prettyprint">boolean</code></td>
<td>Verified issuers are also listed</td>
</tr>
<tr>
<td>blacklisted</td>
<td><code class="prettyprint">boolean</code></td>
<td>Blacklisted issuers are also listed</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve <em>default 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve <em>default 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results</td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format</td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format</td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results <em>default <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted issuers are also listed <em>default <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

<h3 id="date_filter">date_filter</h3>

<table><thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>created</td>
<td>Date generated when issuer is created</td>
</tr>
<tr>
<td>modified</td>
<td>Date generated when issuer is updated</td>
</tr>
</tbody></table>

<h2 id="update-issuer">Update Issuer</h2>

<p>Updates an issuer.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/issuers/&lt;issuer-id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/issuers/&lt;issuer-id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">  
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Big Company Ltd"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1491145388209</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"is_message_mandatory"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1491145388109</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"logo_url"</span><span class="p">:</span><span class="s2">"&lt;logo-url.png&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Money Lane 99"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"google"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOR"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"verified"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"blacklisted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Descriptions</th>
</tr>
</thead><tbody>
<tr>
<td><strong>issuer_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the desired issuer.</td>
</tr>
</tbody></table>

<h2 id="issuer-search">Issuer Search</h2>

<p>Retrieves a list of Issuers associate with search.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/issuers/search
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/issuers/search?query=Big</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">  
   </span><span class="p">{</span><span class="w">  
      </span><span class="s2">"verified"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Big Company Inc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"is_message_mandatory"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"logo_url"</span><span class="p">:</span><span class="s2">"&lt;logo-url.png&gt;"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Money Lane 99"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"google"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOR"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"blacklisted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1491565328234</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1491565328235</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>What you want to search for, such as <strong>name</strong>, <strong>account_number</strong> or <strong>id</strong></td>
</tr>
<tr>
<td>filters</td>
<td><code class="prettyprint">string</code></td>
<td>Use filters for more accurate results</td>
</tr>
<tr>
<td>active</td>
<td><code class="prettyprint">boolean</code></td>
<td>Active issuers are also listed</td>
</tr>
<tr>
<td>verified</td>
<td><code class="prettyprint">boolean</code></td>
<td>Verified issuers are also listed</td>
</tr>
<tr>
<td>blacklisted</td>
<td><code class="prettyprint">boolean</code></td>
<td>Blacklisted issuers are also listed</td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results <em>default <code class="prettyprint">-created</code></em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format <em>default None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format <em>default None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results <em>default <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted issuers are also listed <em>default <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

<h3 id="active-verified-blacklisted">Active, Verified &amp; Blacklisted</h3>

<p>For all <code class="prettyprint">boolean</code> flags it is possible to put:</p>

<ul>
<li><p>True: <code class="prettyprint">1</code>, <code class="prettyprint">&#39;1&#39;</code> or <code class="prettyprint">&#39;true&#39;</code></p></li>
<li><p>False: <code class="prettyprint">0</code>, <code class="prettyprint">&#39;0&#39;</code>or <code class="prettyprint">&#39;false&#39;</code></p></li>
</ul>

<h2 id="delete-issuer">Delete Issuer</h2>

<p>Deletes an issuer.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE https://api.kvass.ai/issuers/&lt;issuer-id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/issuers/&lt;issuer-id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">  
   </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Big Company Inc"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"account_number"</span><span class="p">:</span><span class="s2">"12345678903"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"verified"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111433"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"blacklisted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"is_message_mandatory"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
       </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Money Lane 99"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"google"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOR"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1491572944202</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1491572947166</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"logo_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;logo-url.png&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>issuer_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the issuer to delete</td>
</tr>
</tbody></table>

          <h1 id="metrics">Metrics</h1>

<p>This section describes the collection, aggregating and receiving of metrics automatically 
generated on the KVASS platform while processing different tasks.</p>

<p>It is also possible to create custom metrics over the API and receiving these over the API.</p>

<h2 id="the-metric-object">The Metric Object</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>The index key of the metric</td>
</tr>
<tr>
<td>time_stamp</td>
<td><code class="prettyprint">object</code></td>
<td>The date of the metric as a time stamp</td>
</tr>
<tr>
<td>count</td>
<td><code class="prettyprint">float</code></td>
<td>The number of instances of name per time unit</td>
</tr>
<tr>
<td>sum_values</td>
<td><code class="prettyprint">float</code></td>
<td>The sum of count per time unit</td>
</tr>
<tr>
<td>external</td>
<td><code class="prettyprint">boolean</code></td>
<td>Defines where the metric is created. <em>Default is <code class="prettyprint">false</code></em></td>
</tr>
<tr>
<td>key</td>
<td><code class="prettyprint">string</code></td>
<td>ID field. Composed by the company&rsquo;s uuid, the metric name and the time stamp</td>
</tr>
</tbody></table>

<p></br></br>
The <code class="prettyprint">name</code> of the metric usually has a primary key and multiple secondary keys. 
These are separated with a dot, <code class="prettyprint">.</code>. For example <code class="prettyprint">foo.bar</code>.
</br>
This is for grouping the metrics based on some commonalities.
An example of this is the metrics aggregated for every API request. The primary key is <code class="prettyprint">requests</code>,
This key have multiple of secondary keys, like <code class="prettyprint">type</code> and <code class="prettyprint">status_code</code>. The metrics for
<code class="prettyprint">requests.type.POST</code> returns statistics for all <code class="prettyprint">POST</code> requests. 
<code class="prettyprint">requests.status_code.200</code> returns statistics for all requests with an HTTP status code 200.</p>

<h2 id="get-metrics-by-name">Get Metrics by Name</h2>

<p>This endpoint returns the count, sum of values and an array of metrics for a given name between two dates
and <a href="#metric-resolutions"><code class="prettyprint">resolution</code></a>. The example returns the stats for the metric name <code class="prettyprint">foo</code> for 2 days
with a daily resolution.
It returns the metrics for both <code class="prettyprint">foo.zoo</code> and <code class="prettyprint">foo.bar</code>.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/metrics/&lt;name&gt;?resolution=day
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/metrics/foo</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="s2">"foo.bar"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">],</span><span class="w"> 
    </span><span class="s2">"total_sum"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">},</span><span class="w"> 
 </span><span class="s2">"foo.zoo"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">2.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">],</span><span class="w"> 
    </span><span class="s2">"total_sum"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.0</span><span class="p">}</span><span class="w">
 </span><span class="s2">"_meta"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="s2">"resolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-07T00:00:00+00:00"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-08T23:59:59.99999+00:00"</span><span class="p">},</span><span class="w"> 
</span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date as a time stamp the metrics will be aggregated from. <em>Default is the day before today</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date as a time stamp the metrics will be aggregated to. <em>Default is today</em></td>
</tr>
<tr>
<td>resolution</td>
<td><code class="prettyprint">string</code></td>
<td>One of <a href="#metric-resolutions"><code class="prettyprint">metric resolutions</code></a></td>
</tr>
<tr>
<td>metrics</td>
<td><code class="prettyprint">stirng</code></td>
<td>Filter results by sub-keys under the metric name in the request. See <a href="#get-metrics-by-multiple-keys"><code class="prettyprint">under</code></a></td>
</tr>
</tbody></table>

<h2 id="get-metrics-filter-by-multiple-keys">Get Metrics Filter by Multiple Keys</h2>

<p>It is also possible to filter metrics on multiple sub-keys on a given <code class="prettyprint">name</code>. 
This is the same endpoint as <a href="#get-metrics-by-name"><code class="prettyprint">get metrics by name</code></a>, but with the 
query parameter <code class="prettyprint">metrics</code>.</p>

<p>Getting stats on API usage (requests) is a good example on this. 
The main API request types are <code class="prettyprint">POST</code>, <code class="prettyprint">GET</code>, <code class="prettyprint">PUT</code>, <code class="prettyprint">DELETE</code> and <code class="prettyprint">OPTIONS</code>.
If you use <code class="prettyprint">GET /metrics/request</code> in <a href="#get-metrics-by-name"><code class="prettyprint">get metrics by name</code></a>, you will get all
requests, regardless of type. </p>

<p>If you want to filter by <code class="prettyprint">POST</code> and <code class="prettyprint">GET</code> request you could use this method.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/metrics/&lt;name&gt;?metrics=key,key
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/metrics/requests.type?metrics=post,get&amp;resolution=day</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="s2">"requests.type.POST"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mf">14532.0</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">7366.0</span><span class="p">,</span><span class="w"> </span><span class="mf">7166.0</span><span class="p">],</span><span class="w"> 
    </span><span class="s2">"total_sum"</span><span class="p">:</span><span class="w"> </span><span class="mf">14532.0</span><span class="p">},</span><span class="w"> 
 </span><span class="s2">"requests.type.GET"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mf">120000.0</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">50000.0</span><span class="p">,</span><span class="w"> </span><span class="mf">70000.0</span><span class="p">],</span><span class="w"> 
    </span><span class="s2">"total_sum"</span><span class="p">:</span><span class="w"> </span><span class="mf">120000.0</span><span class="p">}</span><span class="w">
 </span><span class="s2">"_meta"</span><span class="p">:</span><span class="w"> 
    </span><span class="p">{</span><span class="s2">"resolution"</span><span class="p">:</span><span class="w"> </span><span class="s2">"day"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"from_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-07T00:00:00+00:00"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"to_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-04-08T23:59:59.99999+00:00"</span><span class="p">},</span><span class="w"> 
</span><span class="p">}</span><span class="w">

</span></code></pre>
<h2 id="get-metric-count">Get Metric Count</h2>

<p>This endpoint returns the count of instances of a specific metric key between two dates.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/metrics/&lt;name&gt;/count
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/metrics/foo.bar/count</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">456</span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date as a time stamp the metrics will be aggregated from. <em>Default is the day before today</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date as a time stamp the metrics will be aggregated to. <em>Default is today</em></td>
</tr>
</tbody></table>

<h2 id="get-metrics-frequency">Get Metrics Frequency</h2>

<p>This endpoint returns the frequency of a specific metric key between two dates.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/metrics/&lt;name&gt;/freq
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/metrics/foo.bar/freq</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="s2">"freq"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"1"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">}}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date as a time stamp the metrics will be aggregated from. <em>Default is the day before today</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date as a time stamp the metrics will be aggregated to. <em>Default is today</em></td>
</tr>
</tbody></table>

<h2 id="get-metrics-total-sum">Get Metrics Total Sum</h2>

<p>This endpoint returns the total sum of a specific metric key between two dates.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/metrics/&lt;name&gt;/sum
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/metrics/foo.bar/sum</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="s2">"sum"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date as a time stamp the metrics will be aggregated from. <em>Default is the day before today</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date as a time stamp the metrics will be aggregated to. <em>Default is today</em></td>
</tr>
</tbody></table>

<h2 id="create-external-metrics">Create External Metrics</h2>

<p>This endpoint lets you create custom metrics and store them in the database. </p>

<p>You can receive these custom metrics with either of the <code class="prettyprint">GET /metrics</code> methods listed over.
Metrics created over this endpoint will have the flag <code class="prettyprint">external=true</code>.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/metrics
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/metrics</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo.bar"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"value"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time"</span><span class="w"> </span><span class="mi">1523297656</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5acbad570190d9573d512d11"</span><span class="p">},</span><span class="w"> 
    </span><span class="s2">"count"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">  
    </span><span class="s2">"values"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w"> 
    </span><span class="s2">"external"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"sum_values"</span><span class="p">:</span><span class="w"> </span><span class="mf">1000.0</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d721daa2-46be-4685-8fea-b6a17b05fe88:foo.bar:1523297656:ext"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"time_stamp"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1523297656</span><span class="p">},</span><span class="w"> 
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo.bar"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The metric key on which your metrics are grouped on.</td>
</tr>
<tr>
<td>value</td>
<td><code class="prettyprint">number</code></td>
<td>The value of the metric instance. <em>Default is 1</em></td>
</tr>
<tr>
<td>time</td>
<td><code class="prettyprint">number</code></td>
<td>The timestamp of the event the metric happened. <em>Default is now</em></td>
</tr>
</tbody></table>

<h2 id="get-list-of-all-metric-keys">Get List of all Metric Keys</h2>

<p>This endpoint returns an array with all saved instances of the metric keys.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/metrics
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/metrics</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="s2">"foo.bar"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"foo.zoo"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"foo.woo"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"requests"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"requests.type.GET"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"requests.route./metrics"</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"requests.path./metrics"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"..."</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<p></n> </n><br>
<aside class="notice">This endpoint could return an array of <em>considerable</em> length. Only use this in dev process for checking available metric keys.</aside></p>

<h2 id="metric-resolutions">Metric Resolutions</h2>

<p>The metrics could be given in these resolutions for a given metric name.</p>

<table><thead>
<tr>
<th>Resolution</th>
<th>Argument</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Daily</td>
<td><code class="prettyprint">day</code></td>
<td>Daily metrics <em>Default</em></td>
</tr>
<tr>
<td>Hourly</td>
<td><code class="prettyprint">hour</code></td>
<td>Hourly metrics</td>
</tr>
<tr>
<td>Minutely</td>
<td><code class="prettyprint">minute</code></td>
<td>Minutely metrics</td>
</tr>
</tbody></table>

          <h1 id="orders">Orders</h1>

<p>Orders are the result of a User purchasing a given set of Products.
A key function of this feature os that you can associate a particular
product to a particular provider.</p>

<p>The <code class="prettyprint">total_amount</code> is set by the <code class="prettyprint">items</code> and the <code class="prettyprint">resources</code>. See section below.</p>

<h2 id="order-object">Order object</h2>

<table><thead>
<tr>
<th>Attributes</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>currency</td>
<td><code class="prettyprint">string</code></td>
<td>3 letter ISO currency code as defined by <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a></td>
</tr>
<tr>
<td>billing_address</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#address"><code class="prettyprint">Address</code></a> used for billing purposes</td>
</tr>
<tr>
<td>deliveries</td>
<td><code class="prettyprint">array</code></td>
<td>Used to store the delivery history for an order</td>
</tr>
<tr>
<td>delivery_address</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#address"><code class="prettyprint">Address</code></a> used for delivery</td>
</tr>
<tr>
<td>delivery_status</td>
<td><code class="prettyprint">string</code></td>
<td>See <a href="#delivery_status"><code class="prettyprint">delivery statuses</code></a> <em>default is PENDING</em></td>
</tr>
<tr>
<td>delivery_time</td>
<td><code class="prettyprint">object</code></td>
<td>Expected arrival time for delivery, <code class="prettyprint">timestamp</code> format</td>
</tr>
<tr>
<td>order_status</td>
<td><code class="prettyprint">string</code></td>
<td>See <a href="#order_status"><code class="prettyprint">order statuses</code></a> <em>default is CREATED</em></td>
</tr>
<tr>
<td>items</td>
<td><code class="prettyprint">array</code></td>
<td>List of <a href="#order-items"><code class="prettyprint">items</code></a> associated with an order</td>
</tr>
<tr>
<td>human_id</td>
<td><code class="prettyprint">string</code></td>
<td>Human readable ID that identifies the order easily. e.g. <code class="prettyprint">3AG7UA</code></td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>Field used to send notes between an user and a provider</td>
</tr>
<tr>
<td>payments</td>
<td><code class="prettyprint">array</code></td>
<td>List of <a href="#payments"><code class="prettyprint">Payment</code></a> objects associated with order</td>
</tr>
<tr>
<td>payment_method</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#payment-methods"><code class="prettyprint">Payment Methods</code></a></td>
</tr>
<tr>
<td>provider</td>
<td><code class="prettyprint">object</code></td>
<td>Provider assigned to an order</td>
</tr>
<tr>
<td>resources</td>
<td><code class="prettyprint">array</code></td>
<td>An array of <a href="#resources"><code class="prettyprint">resources</code></a> associated with the order. See <a href="#resources-in-the-order"><code class="prettyprint">description</code></a></td>
</tr>
<tr>
<td>top_up_amount</td>
<td><code class="prettyprint">number</code></td>
<td>Extra amount added to <code class="prettyprint">total_amount</code> to fulfill the company&rsquo;s minimum order value</td>
</tr>
<tr>
<td>top_up_vat</td>
<td><code class="prettyprint">float</code></td>
<td>The VAT on the `top_up_amount. <em>From 0.0 to 1.0</em></td>
</tr>
<tr>
<td>total_amount</td>
<td><code class="prettyprint">float</code></td>
<td>Amount as a float with two decimals. e.g., 12.34. The amount is automatically calculate when you create an order.</td>
</tr>
<tr>
<td>total_quantity</td>
<td><code class="prettyprint">number</code></td>
<td>Total number of products in an order</td>
</tr>
<tr>
<td>units</td>
<td><code class="prettyprint">number</code></td>
<td>Number of unique products in an order</td>
</tr>
<tr>
<td>accounting_reference</td>
<td><code class="prettyprint">string</code></td>
<td>A accounting reference ID</td>
</tr>
</tbody></table>

<h2 id="create-an-order">Create an Order</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/orders
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/orders</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5703fce3308714000dea1ff1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5703fcde308714000dea1fe8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"delivery_time"</span><span class="p">:</span><span class="w"> </span><span class="mi">1472022000000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"delivery_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">59.9294087</span><span class="p">,</span><span class="w">
      </span><span class="mf">10.7643042</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0557"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Christies gate 34A"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Norway"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">59.9294087</span><span class="p">,</span><span class="w">
      </span><span class="mf">10.7643042</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0557"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Christies gate 34A"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Norway"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some type of note"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1488475795244</span><span class="p">},</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"586faf7445ed910006373513"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"delivery_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">59.9294087</span><span class="p">,</span><span class="w">
      </span><span class="mf">10.7643042</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0557"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Christies gate 34A"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Norway"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="mf">59.9294087</span><span class="p">,</span><span class="w">
      </span><span class="mf">10.7643042</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0557"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Christies gate 34A"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Norway"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58b85693d76d439fdacea41b"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">40.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"delivery_time"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1472022000000</span><span class="p">},</span><span class="w">
  </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some type of note"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="s2">"order_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5703fce3308714000dea1ff1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.1</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5703fcde308714000dea1fe8"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"units"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"delivery_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PENDING"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1488475795244</span><span class="p">},</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new order.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>currency</strong></td>
<td><code class="prettyprint">string</code></td>
<td>3 letter ISO currency code as defined by <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a></td>
</tr>
<tr>
<td>billing_address</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#address"><code class="prettyprint">Address</code></a> used for billing purposes</td>
</tr>
<tr>
<td>delivery_time</td>
<td><code class="prettyprint">number</code></td>
<td>Expected time of delivery, <code class="prettyprint">timestamp</code> format</td>
</tr>
<tr>
<td>delivery_address</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#address"><code class="prettyprint">Address</code></a> used for delivery</td>
</tr>
<tr>
<td>items</td>
<td><code class="prettyprint">array</code></td>
<td>List of <a href="#order-items"><code class="prettyprint">order items</code></a></td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>Field used to provide extra information to a provider</td>
</tr>
<tr>
<td>resources</td>
<td><code class="prettyprint">array</code></td>
<td>List of <a href="#resources"><code class="prettyprint">resource</code></a> ID&rsquo;s. See <a href="#resources-in-the-order"><code class="prettyprint">description</code></a></td>
</tr>
<tr>
<td>payment_method</td>
<td><code class="prettyprint">string</code></td>
<td><a href="#payment-methods"><code class="prettyprint">Payment method</code></a> for this order</td>
</tr>
</tbody></table>

<h2 id="retrieve-an-order">Retrieve an Order</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/orders/&lt;orderid&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/orders/&lt;orderid&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"units"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"delivery_status"</span><span class="p">:</span><span class="s2">"ACCEPTED"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"human_id"</span><span class="p">:</span><span class="s2">"51Q4LN"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"payments"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495196003948</span><span class="p">},</span><span class="w">
   </span><span class="s2">"provider"</span><span class="p">:{</span><span class="err">...</span><span class="p">},</span><span class="w">
   </span><span class="s2">"top_up_amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"stripe_charge_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"order_status"</span><span class="p">:</span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15db70e2a10acb65362"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"billing_address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"deliveries"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
   </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
      </span><span class="p">{</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span><span class="w">
         </span><span class="s2">"discount"</span><span class="p">:</span><span class="mf">0.9</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:{</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:{},</span><span class="w">
            </span><span class="s2">"parents"</span><span class="p">:[],</span><span class="w">
            </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"/"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"default_position"</span><span class="p">:[</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">],</span><span class="w">
            </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1494479087000</span><span class="p">},</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15eb70e2a10acb65374"</span><span class="p">},</span><span class="w">
            </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
            </span><span class="s2">"max_distance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"main_product"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495195998969</span><span class="p">},</span><span class="w">
            </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Ivar"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"vat"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15db70e2a10acb65362"</span><span class="p">},</span><span class="w">
            </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"Product"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_sub_products"</span><span class="p">:[],</span><span class="w">
            </span><span class="s2">"business_rules"</span><span class="p">:[],</span><span class="w">
            </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">100.0</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495264401233</span><span class="p">},</span><span class="w">
   </span><span class="s2">"delivery_address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"total_quantity"</span><span class="p">:</span><span class="mi">120</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee163b70e2a10acb653a7"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="mf">1200.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"stripe_refund_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"override_company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"user"</span><span class="p">:{</span><span class="err">...</span><span class="p">},</span><span class="w">
   </span><span class="s2">"delivery_time"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1497009600000</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves an Order with a given ID.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>order id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried order</td>
</tr>
</tbody></table>

<h2 id="list-all-orders">List all Orders</h2>

<p>Retrieves a list of all Orders associated with the company&rsquo;s database.
It is also possible to filter the search using pagination.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/orders
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/orders</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"units"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
       </span><span class="s2">"delivery_status"</span><span class="p">:</span><span class="s2">"ACCEPTED"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"human_id"</span><span class="p">:</span><span class="s2">"51Q4LN"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"payments"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495196003948</span><span class="p">},</span><span class="w">
       </span><span class="s2">"provider"</span><span class="p">:{</span><span class="err">...</span><span class="p">},</span><span class="w">
       </span><span class="s2">"top_up_amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"stripe_charge_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"order_status"</span><span class="p">:</span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15db70e2a10acb65362"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"billing_address"</span><span class="p">:{</span><span class="w">
          </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"deliveries"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
          </span><span class="p">{</span><span class="w">
             </span><span class="s2">"quantity"</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span><span class="w">
             </span><span class="s2">"discount"</span><span class="p">:</span><span class="mf">0.9</span><span class="p">,</span><span class="w">
             </span><span class="s2">"product"</span><span class="p">:{</span><span class="w">
                </span><span class="s2">"properties"</span><span class="p">:{},</span><span class="w">
                </span><span class="s2">"parents"</span><span class="p">:[],</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"/"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default_position"</span><span class="p">:[</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">],</span><span class="w">
                </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1494479087000</span><span class="p">},</span><span class="w">
                </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15eb70e2a10acb65374"</span><span class="p">},</span><span class="w">
                </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
                </span><span class="s2">"max_distance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"main_product"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495195998969</span><span class="p">},</span><span class="w">
                </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Ivar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"vat"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15db70e2a10acb65362"</span><span class="p">},</span><span class="w">
                </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"Product"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"_sub_products"</span><span class="p">:[],</span><span class="w">
                </span><span class="s2">"business_rules"</span><span class="p">:[],</span><span class="w">
                </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">100.0</span><span class="w">
             </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
       </span><span class="p">],</span><span class="w">
       </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495264401233</span><span class="p">},</span><span class="w">
       </span><span class="s2">"delivery_address"</span><span class="p">:{</span><span class="w">
          </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"total_quantity"</span><span class="p">:</span><span class="mi">120</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee163b70e2a10acb653a7"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="mf">1200.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"stripe_refund_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"override_company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"user"</span><span class="p">:{</span><span class="err">...</span><span class="p">},</span><span class="w">
       </span><span class="s2">"delivery_time"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1497009600000</span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format <em>default is None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used to filter results. <em>default is created</em></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve <em>default is 0</em></td>
</tr>
<tr>
<td>order_status</td>
<td><code class="prettyprint">string</code></td>
<td>Return orders with a specific <a href="#order_status"><code class="prettyprint">status</code></a></td>
</tr>
<tr>
<td>delivery_status</td>
<td><code class="prettyprint">string</code></td>
<td>Return orders with a specific delivery <a href="#delivery_status"><code class="prettyprint">status</code></a></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results</td>
</tr>
</tbody></table>

<h2 id="search-orders">Search Orders</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/orders/search
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/orders/search?query=51Q4LN</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"units"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="w">
       </span><span class="s2">"delivery_status"</span><span class="p">:</span><span class="s2">"ACCEPTED"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"human_id"</span><span class="p">:</span><span class="s2">"51Q4LN"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"payments"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495196003948</span><span class="p">},</span><span class="w">
       </span><span class="s2">"provider"</span><span class="p">:{</span><span class="err">...</span><span class="p">},</span><span class="w">
       </span><span class="s2">"top_up_amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"stripe_charge_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"order_status"</span><span class="p">:</span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15db70e2a10acb65362"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"billing_address"</span><span class="p">:{</span><span class="w">
          </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"deliveries"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"items"</span><span class="p">:[</span><span class="w">
          </span><span class="p">{</span><span class="w">
             </span><span class="s2">"quantity"</span><span class="p">:</span><span class="mi">60</span><span class="p">,</span><span class="w">
             </span><span class="s2">"discount"</span><span class="p">:</span><span class="mf">0.9</span><span class="p">,</span><span class="w">
             </span><span class="s2">"product"</span><span class="p">:{</span><span class="w">
                </span><span class="s2">"properties"</span><span class="p">:{},</span><span class="w">
                </span><span class="s2">"parents"</span><span class="p">:[],</span><span class="w">
                </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"/"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"default_position"</span><span class="p">:[</span><span class="mi">-1</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">],</span><span class="w">
                </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1494479087000</span><span class="p">},</span><span class="w">
                </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15eb70e2a10acb65374"</span><span class="p">},</span><span class="w">
                </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
                </span><span class="s2">"max_distance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"main_product"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495195998969</span><span class="p">},</span><span class="w">
                </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Ivar"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"vat"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee15db70e2a10acb65362"</span><span class="p">},</span><span class="w">
                </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
                </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"Product"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"USD"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"_sub_products"</span><span class="p">:[],</span><span class="w">
                </span><span class="s2">"business_rules"</span><span class="p">:[],</span><span class="w">
                </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">100.0</span><span class="w">
             </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
       </span><span class="p">],</span><span class="w">
       </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495264401233</span><span class="p">},</span><span class="w">
       </span><span class="s2">"delivery_address"</span><span class="p">:{</span><span class="w">
          </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"total_quantity"</span><span class="p">:</span><span class="mi">120</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee163b70e2a10acb653a7"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="mf">1200.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"stripe_refund_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"override_company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"user"</span><span class="p">:{</span><span class="err">...</span><span class="p">},</span><span class="w">
       </span><span class="s2">"delivery_time"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1497009600000</span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all Orders associated with the search parameters.
It is possible to search for id, human_id and first and last name for
Users and Providers associated with orders.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The search query. One of <strong>human_id</strong>, <strong>user name</strong>, <strong>provider name</strong>, or <strong>id</strong></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results. <em>default is created</em></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 0</em></td>
</tr>
<tr>
<td>order_status</td>
<td><code class="prettyprint">string</code></td>
<td>Return orders with specific status</td>
</tr>
<tr>
<td>delivery_status</td>
<td><code class="prettyprint">string</code></td>
<td>Return orders with specific delivery status</td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results</td>
</tr>
</tbody></table>

<h2 id="order-items">Order Items</h2>

<table><thead>
<tr>
<th>Attributes</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>product</strong></td>
<td><code class="prettyprint">string</code></td>
<td>A <a href="#products"><code class="prettyprint">Product</code></a>  ID</td>
</tr>
<tr>
<td>quantity</td>
<td><code class="prettyprint">number</code></td>
<td>The quantity of product</td>
</tr>
<tr>
<td>discount</td>
<td><code class="prettyprint">number</code></td>
<td>The discount of the product.price in the order</td>
</tr>
<tr>
<td>sub_products</td>
<td><code class="prettyprint">array</code></td>
<td>An array of sub-product ID&rsquo;s associated in order</td>
</tr>
</tbody></table>

<p>The order could have items in it. These items is in an array.
The items contains information to specify the <code class="prettyprint">total_amount</code> in the order.
Items specify which products that is associated to the order.</p>

<p>The sub_products in the <code class="prettyprint">array</code> could either have a price or a <code class="prettyprint">price_change_percentage</code>.
If the <code class="prettyprint">price_change_percentage</code> is not 0,
this percentage will multiplied with the <code class="prettyprint">product.price</code> in that item, affecting the <code class="prettyprint">total_amount</code>.
If the <code class="prettyprint">price_change_percentage</code> is 0, the price in the sub-product adds that price to the <code class="prettyprint">total_amount</code>.</p>

<h2 id="resources-in-the-order">Resources in the Order</h2>

<p>The order could have <a href="#resources"><code class="prettyprint">resources</code></a> associated to it.
The <code class="prettyprint">total_amount</code> is affected by every <code class="prettyprint">retail</code> resource in the array, by the
field <code class="prettyprint">retail_price</code>.</p>

<h2 id="order-arguments-and-statuses">Order Arguments and Statuses</h2>

<h3 id="date_filter">date_filter</h3>

<table><thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>created</td>
<td>Shows orders by date of creation</td>
</tr>
<tr>
<td>delivery</td>
<td>Shows orders by delivery time</td>
</tr>
</tbody></table>

<h3 id="order_status">order_status</h3>

<table><thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>CREATED</td>
<td>Order is created</td>
</tr>
<tr>
<td>PROCESSING</td>
<td>Order is being processed</td>
</tr>
<tr>
<td>DECLINED</td>
<td>Order is declined for some reason</td>
</tr>
<tr>
<td>FAILED</td>
<td>Order has failed for some reason</td>
</tr>
<tr>
<td>SUCCESS</td>
<td>Order has succeeded</td>
</tr>
<tr>
<td>CANCELLED</td>
<td>Order is cancelled</td>
</tr>
</tbody></table>

<h3 id="delivery_status">delivery_status</h3>

<table><thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>CREATED</td>
<td>Delivery is created</td>
</tr>
<tr>
<td>PENDING</td>
<td>Delivery is pending</td>
</tr>
<tr>
<td>PROCESSING</td>
<td>Delivery is being processed</td>
</tr>
<tr>
<td>ASSIGNING</td>
<td>Delivery has been assigned to a provider</td>
</tr>
<tr>
<td>PICKUP_STARTED</td>
<td>Pickup from customer has been sent</td>
</tr>
<tr>
<td>PICKUP_ARRIVED</td>
<td>Pickup from customer is complete</td>
</tr>
<tr>
<td>DROPOFF_STARTED</td>
<td>Dropoff to customer has been sent</td>
</tr>
<tr>
<td>DROPOFF_ARRIVED</td>
<td>Dropoff to customer is complete</td>
</tr>
<tr>
<td>CANCELLED</td>
<td>Delivery is cancelled</td>
</tr>
<tr>
<td>DONE</td>
<td>Delivery task is done</td>
</tr>
<tr>
<td>UNKNOWN</td>
<td>Delivery is unknown</td>
</tr>
<tr>
<td>QUEUED</td>
<td>Delivery is in queue</td>
</tr>
</tbody></table>

          <h1 id="plans">Plans</h1>

<p>The Plans method is utilized by the <a href="#subscriptions"><code class="prettyprint">Subscriptions</code></a> method.
Its main feature is to set the billing cycle, currency, product items and
the duration of a subscription. The interval_unit and the billing_interval
are the most important fields and define the period of time between
each subscription action and each payment. The next billing and interval dates are
calculated from the starting date of the subscription.</p>

<p>Only Admins could create, edit or delete a plan.
If your company want to allow your customers to create plans,
see <code class="prettyprint">Create Subscription with a pre-set company specific Plan</code> in the <a href="#subscriptions"><code class="prettyprint">Subscriptions</code></a>.</p>

<h2 id="plans-object">Plans Object</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>method</td>
<td><code class="prettyprint">string</code></td>
<td>The plan type. <em>Default is <code class="prettyprint">basic</code></em>.</td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>The name of the plan.</td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>A short description of the plan.</td>
</tr>
<tr>
<td>interval_unit</td>
<td><code class="prettyprint">string</code></td>
<td>The frequency that the subscription acts upon. <br> Choices: <code class="prettyprint">DAY</code>, <code class="prettyprint">WEEK</code>, <code class="prettyprint">MONTH</code>, <br> <code class="prettyprint">MONTH_END</code>, <code class="prettyprint">ANNUAL</code></td>
</tr>
<tr>
<td>interval_count</td>
<td><code class="prettyprint">integer</code></td>
<td>Total number of interval_units.</td>
</tr>
<tr>
<td>billing_interval</td>
<td><code class="prettyprint">string</code></td>
<td>Defines billing frequency. <br> Choices: <code class="prettyprint">WEEK</code>, <code class="prettyprint">MONTH</code>, <code class="prettyprint">MONTH_END</code></td>
</tr>
<tr>
<td>static</td>
<td><code class="prettyprint">boolean</code></td>
<td>Defines if plan is allowed to be changed.</td>
</tr>
<tr>
<td>items</td>
<td><code class="prettyprint">array</code></td>
<td>List of items associated with Plan. See description below.</td>
</tr>
<tr>
<td>units</td>
<td><code class="prettyprint">number</code></td>
<td>Total number of items in the plan.</td>
</tr>
<tr>
<td>currency</td>
<td><code class="prettyprint">string</code></td>
<td>Three letter ISO currency code as defined by ISO 4217.</td>
</tr>
<tr>
<td>total_amount</td>
<td><code class="prettyprint">integer</code></td>
<td>The amount to be charged on the interval specified. If missing, this will be calculated as the sum of the <code class="prettyprint">items</code>.</td>
</tr>
<tr>
<td>initial_fail_amount_action</td>
<td><code class="prettyprint">string</code></td>
<td>Decides what happens if a payment fails in the <a href="#subscriptions"><code class="prettyprint">Subscription</code></a>. <br> Choices: <code class="prettyprint">CANCEL</code>, <code class="prettyprint">CONTINUE</code></td>
</tr>
<tr>
<td>max_fail_attempts</td>
<td><code class="prettyprint">integer</code></td>
<td>If <code class="prettyprint">initial_fail_amount_action</code> is <code class="prettyprint">CONTINUE</code>, this is the number of interval_units that is allowed to fail before the <a href="#subscriptions"><code class="prettyprint">Subscription</code></a> stops.</td>
</tr>
</tbody></table>

<h3 id="plan-items">Plan items</h3>

<p>The plan could contain items as a list. These items describe the products the plan is based on.
The items consist of a <a href="#products"><code class="prettyprint">product</code></a>, <code class="prettyprint">quantity</code> and <code class="prettyprint">discount</code>
The <code class="prettyprint">quantity</code> describes the number of that product. The <code class="prettyprint">discount</code> sets the percent of
discount of that product, from 0.0 to 1.0, where 0.0 is no discount and 1.0 is a 100% discount.
The <code class="prettyprint">total_amount</code> of the plan will be calculated from the total sum of the products.</p>

<h2 id="create-a-new-plan">Create a new Plan</h2>

<p>This creates a new plan. The plan is not <a href="#users"><code class="prettyprint">user</code></a> specific,
but a user could create a plan based on their demands. If you
want a non-customizable plan, <br> set <code class="prettyprint">static_plan</code> to <code class="prettyprint">true</code>
when creating a new plan.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/plans
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/plans</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"interval_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WEEK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan Deluxe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"static"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;product1_id&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;product2_id&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"initial_fail_amount_action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONTINUE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_fail_attempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a note regarding the Plan"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w">
    </span><span class="s2">"auto_bill_amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"initial_fail_amount_action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONTINUE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_fail_attempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan Deluxe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"interval_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WEEK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de64"</span><span class="p">},</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de65"</span><span class="p">},</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a note regarding the Plan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"static"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>interval_unit</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The frequency that the Subscription acts upon. <br> interval_unit choices: <code class="prettyprint">DAY</code>, <code class="prettyprint">WEEK</code>, <code class="prettyprint">MONTH</code>, <code class="prettyprint">MONTH_END</code>, <code class="prettyprint">ANNUAL</code></td>
</tr>
<tr>
<td><strong>billing_interval</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Defines billing frequency. <br> Choices: <code class="prettyprint">WEEK</code>, <code class="prettyprint">MONTH</code>, <code class="prettyprint">MONTH_END</code></td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Three letter ISO currency code as defined by ISO 4217.7</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-plan">Retrieve a Plan</h2>

<p>Retrieve a particular Plan, based on its id.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/plans/&lt;plan_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/plans/&lt;plan_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496411756242</span><span class="p">},</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de64"</span><span class="p">},</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de65"</span><span class="p">},</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}],</span><span class="w">
     </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
     </span><span class="s2">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTH"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w"> 
     </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Golden Plan"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"interval_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WEEK"</span><span class="p">,</span><span class="w">
     </span><span class="s2">"static"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
     </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">500.0</span><span class="p">,</span><span class="w">
     </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">}</span><span class="w">
 </span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The unique id of a particular plan</td>
</tr>
</tbody></table>

<h2 id="get-list-of-all-plans-associated-with-company">Get list of all Plans associated with Company</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/plans
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/plans</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">[</span>
<span class="s">    {</span>
<span class="s">        "created": {</span>
<span class="s">            "$date": 1496412265911</span>
<span class="s">        },</span>
<span class="s">        "interval_unit": "WEEK",</span>
<span class="s">        "currency": "NOK",</span>
<span class="s">        "name": "Golden Plan",</span>
<span class="s">        "updated": {</span>
<span class="s">            "$date": 1496412265911</span>
<span class="s">        },</span>
<span class="s">        "static": false,</span>
<span class="s">        "billing_interval": "MONTH",</span>
<span class="s">        "_id": {</span>
<span class="s">            "$oid": "59317069d57ba2781c739479"</span>
<span class="s">        },</span>
<span class="s">        "total_amount": 500.0,</span>
<span class="s">        "company": {</span>
<span class="s">            "$oid": "57ee9c71d76d431f8511142f"</span>
<span class="s">        },</span>
<span class="s">        "deleted": false,</span>
<span class="s">        "items": [{</span>
<span class="s">                "discount": 0.0,</span>
<span class="s">                "quantity": 1,</span>
<span class="s">                "product": {</span>
<span class="s">                    "$oid": "59317069d57ba2781c739477"</span>
<span class="s">                }</span>
<span class="s">            },</span>
<span class="s">            {</span>
<span class="s">                "discount": 0.0,</span>
<span class="s">                "quantity": 2,</span>
<span class="s">                "product": {</span>
<span class="s">                    "$oid": "59317069d57ba2781c739478"</span>
<span class="s">                }</span>
<span class="s">            }</span>
<span class="s">        ],</span>
<span class="s">        "status": "CREATED"</span>
<span class="s">    },</span>
<span class="s">    {</span>
<span class="s">        "created": {</span>
<span class="s">            "$date": 1496412265930</span>
<span class="s">        },</span>
<span class="s">        "interval_unit": "WEEK",</span>
<span class="s">        "...": "..."</span>
<span class="s">    }</span>
<span class="s">]</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">integer</code></td>
<td>Number of items to retrieve.</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">integer</code></td>
<td>Which page to retrieve. <em>default page size is 50</em></td>
</tr>
<tr>
<td>sorting</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <br> If missing, the default is <code class="prettyprint">-created</code>.</td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted products are also listed.</td>
</tr>
</tbody></table>

<h2 id="update-plan">Update Plan</h2>

<p>Update a Plan. This is only possible if <code class="prettyprint">static_plan</code> is <code class="prettyprint">false</code>.
Not all fields are possible to update. See fields in Argument below.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/plans/&lt;plan_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/plans</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried plan.</td>
</tr>
<tr>
<td>active</td>
<td><code class="prettyprint">boolean</code></td>
<td>Indicates if the plan is currently active. <em>default is <code class="prettyprint">true</code></em></td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>Name of the plan.</td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>Note regarding the plan.</td>
</tr>
<tr>
<td>initial_fail_amount_action</td>
<td><code class="prettyprint">string</code></td>
<td>Indicates what happens when payment for the plan fails.  Choices: <code class="prettyprint">CONTINUE</code>, <code class="prettyprint">CANCEL</code></td>
</tr>
<tr>
<td>max_fail_attempts</td>
<td><code class="prettyprint">number</code></td>
<td>How many times a payment can fail in the subscription, but still continue.</td>
</tr>
<tr>
<td>discount</td>
<td><code class="prettyprint">number</code></td>
<td>Between 0.0 an 1.0, where 1.0 is 100% discount on the total_price.</td>
</tr>
<tr>
<td>total_amount</td>
<td><code class="prettyprint">number</code></td>
<td>The total cost of the subscription payment. If set, the total_amount is not based on the sum of products.</td>
</tr>
</tbody></table>

<h2 id="delete-plan">Delete Plan</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE https://api.kvass.ai/plans/&lt;plan_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/plans/&lt;plans_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<p>Deletes a plan with a given ID.</p>

<h2 id="the-recurring-order-plan">The Recurring Order Plan</h2>

<p>Unlike the basic plan, the <code class="prettyprint">Recurring Order Plan</code> could be created by a non-admin user.</p>

<p>The <code class="prettyprint">Recurring Order Plan</code> could either be paid per order or periodically every week or month.
The <code class="prettyprint">Recurring Order Plan</code> has these attributes, in addition to the attributes inherited by the basic plan.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>user</strong></td>
<td><code class="prettyprint">object</code></td>
<td><a href="#Users"><code class="prettyprint">User</code></a> associated with the plan</td>
</tr>
<tr>
<td><strong>interval_unit</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The frequency of the subscription. <br>Choices: <code class="prettyprint">DAY</code>, <code class="prettyprint">WEEK</code>, <code class="prettyprint">MONTH</code><br></td>
</tr>
<tr>
<td><strong>recurring_days</strong></td>
<td><code class="prettyprint">array</code></td>
<td>An array of <a href="#recurring-day"><code class="prettyprint">RecurringDay</code></a>. Defines schedule.</td>
</tr>
<tr>
<td><strong>billing_interval</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Defines the billing frequency. <br> Choices: <code class="prettyprint">WEEK</code>, <code class="prettyprint">MONTH</code>, <code class="prettyprint">MONTH_END</code>, <code class="prettyprint">PER_ORDER</code></td>
</tr>
<tr>
<td>method</td>
<td><code class="prettyprint">string</code></td>
<td>The plan type: <code class="prettyprint">recurring_order</code>.</td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>The name of the plan. <em>default is <code class="prettyprint">RECURRING_ORDER_PLAN</code></em></td>
</tr>
</tbody></table>

<h3 id="recurring-day">Recurring Day</h3>

<p>A Recurring Order Plan must contain recurring days as a list.
The recurring_days contains the parameters that decide when the orders are set to be scheduled.
The parameters to select the schedule are day, hour and minute.
This is relative to the <a href="#plans"><code class="prettyprint">Plan</code></a>&lsquo;s interval unit.
For example, if the <code class="prettyprint">interval_unit</code> is set to WEEK, the value of <code class="prettyprint">day</code> could be between 0 and 6.</p>

<table><thead>
<tr>
<th>Number</th>
<th>Day</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>Monday</td>
</tr>
<tr>
<td>1</td>
<td>Tuesday</td>
</tr>
<tr>
<td>2</td>
<td>Wednesday</td>
</tr>
<tr>
<td>3</td>
<td>Thursday</td>
</tr>
<tr>
<td>4</td>
<td>Friday</td>
</tr>
<tr>
<td>5</td>
<td>Saturday</td>
</tr>
<tr>
<td>6</td>
<td>Sunday</td>
</tr>
</tbody></table>

<p>If the <code class="prettyprint">interval_unit</code> in the <a href="#plans"><code class="prettyprint">Plan</code></a> is <code class="prettyprint">MONTH</code>, the <code class="prettyprint">day</code> is the day of the month. For example, if you want to set a monthly schedule for the 2nd day of every month, set <code class="prettyprint">day</code> to <code class="prettyprint">2</code> and the <code class="prettyprint">interval_unit</code> in the <a href="#plans"><code class="prettyprint">Plan</code></a> to <code class="prettyprint">MONTH</code>.</p>

<p>If you want the schedule to be the last day of every month, set the <code class="prettyprint">day</code> parameter to <code class="prettyprint">31</code>. If the <code class="prettyprint">day</code> parameter is greater than the number of days for that month, the order is scheduled for the last day of that month.</p>

<p>You could also choose the time of day by using the parameters <code class="prettyprint">hour</code> and <code class="prettyprint">minute</code>. If not set, the time of day will be set by the initial order.</p>

<h3 id="create-recurring-order-plan">Create Recurring Order Plan</h3>

<p>This us how to create a new recurring order plan. The plan is <a href="#users"><code class="prettyprint">user</code></a> specific.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/plans
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/plans</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="err">'recurring_order'</span><span class="p">,</span><span class="w">
    </span><span class="s2">"interval_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WEEK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recurring Order Plan Deluxe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;product1_id&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;product2_id&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"initial_fail_amount_action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONTINUE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_fail_attempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a note regarding the Plan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"interval_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recurring_days"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">},</span><span class="w">
                       </span><span class="p">{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s2">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recurring_order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auto_bill_amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"initial_fail_amount_action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONTINUE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_fail_attempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recurring Order Plan Deluxe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"interval_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WEEK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de64"</span><span class="p">},</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de65"</span><span class="p">},</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a note regarding the Plan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"static"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recurring_days"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"starting_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w"> </span><span class="s2">"next_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">}},</span><span class="w">
                       </span><span class="p">{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"starting_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494998</span><span class="p">},</span><span class="w"> </span><span class="s2">"next_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494998</span><span class="p">}}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="update-recurring-order-plan">Update Recurring Order Plan</h3>

<p>It is only possible to update a plan if <code class="prettyprint">static_plan</code> is <code class="prettyprint">false</code>.
Not all fields are possible to update.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/plans/&lt;plan_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/plans/&lt;plan_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="err">'recurring_order'</span><span class="p">,</span><span class="w">
    </span><span class="s2">"interval_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WEEK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recurring Order Plan Deluxe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;product1_id&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w">
              </span><span class="p">{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;product2_id&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"initial_fail_amount_action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONTINUE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_fail_attempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a note regarding the Plan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"interval_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recurring_days"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"starting_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w"> </span><span class="s2">"next_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">}},</span><span class="w">
                       </span><span class="p">{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s2">"starting_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494998</span><span class="p">},</span><span class="w"> </span><span class="s2">"next_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494998</span><span class="p">}},</span><span class="w">
                       </span><span class="p">{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"hour"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s2">"minute"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recurring_order"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auto_bill_amount"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_interval"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MONTH"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"initial_fail_amount_action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CONTINUE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_fail_attempts"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Recurring Order Plan Deluxe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">300.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"interval_unit"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WEEK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de64"</span><span class="p">},</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="s2">"discount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w">
         </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de65"</span><span class="p">},</span><span class="w">
         </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This is a note regarding the Plan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"static"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recurring_days"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s2">"starting_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">},</span><span class="w"> </span><span class="s2">"next_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494652</span><span class="p">}},</span><span class="w">
                       </span><span class="p">{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s2">"starting_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494998</span><span class="p">},</span><span class="w"> </span><span class="s2">"next_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410494998</span><span class="p">}},</span><span class="w">
                       </span><span class="p">{</span><span class="s2">"day"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s2">"starting_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410495952</span><span class="p">},</span><span class="w"> </span><span class="s2">"next_day"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1496410495952</span><span class="p">}}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried plan.</td>
</tr>
<tr>
<td>active</td>
<td><code class="prettyprint">boolean</code></td>
<td>If the plan is active. <em>default is <code class="prettyprint">true</code></em></td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>Name of the plan.</td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>Note regarding the plan.</td>
</tr>
<tr>
<td>initial_fail_amount_action</td>
<td><code class="prettyprint">string</code></td>
<td>Indicates what happens when a  in the subscription fails. Choices: <code class="prettyprint">CONTINUE</code>, <code class="prettyprint">CANCEL</code></td>
</tr>
<tr>
<td>max_fail_attempts</td>
<td><code class="prettyprint">number</code></td>
<td>How many times a payment can fail in the subscription, but still continue.</td>
</tr>
<tr>
<td>discount</td>
<td><code class="prettyprint">number</code></td>
<td>Between 0.0 an 1.0, where 1.0 is 100% discount on the <code class="prettyprint">total_amount</code>.</td>
</tr>
<tr>
<td>total_amount</td>
<td><code class="prettyprint">number</code></td>
<td>The total cost of the subscription payment. If set, the total_amount is not based on the sum of products.</td>
</tr>
<tr>
<td>recurring_days</td>
<td><code class="prettyprint">array</code></td>
<td>When updating the recurring days you can return both of following format:</td>
</tr>
</tbody></table>

<ul>
<li><code class="prettyprint">{&quot;day&quot;: 0, &quot;starting_day&quot;: {&quot;$date&quot;: 1496410494652}, &quot;next_day&quot;: {&quot;$date&quot;: 1496410494652}}</code> - it means this recurring day already exists</li>
<li><code class="prettyprint">{&quot;day&quot;: 2, &quot;hour&quot;: 10, &quot;minute&quot;: 15}</code></li>
</ul>

<h3 id="get-subscriptions-used-by-a-plan">Get Subscriptions used by a Plan</h3>

<p>This request will return an array of all subscriptions used by a plan.
We also allow you to use query parameters. Please take a look below for a list of accepted query parameters.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/plans/&lt;plan_id&gt;/subscriptions
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/plans/&lt;plan_id&gt;/subscriptions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"SubscriptionMethod.LicenseSubscription"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1538056530832</span><span class="p">},</span><span class="w">
       </span><span class="s2">"updated"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1538056530832</span><span class="p">},</span><span class="w">
       </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
       </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"trial"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"user"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"payments"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"infinite"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"plan"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"5bace152cb416c14a3115a6c"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"prorate_amount"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"total_fail_attempts"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"license"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"LICENSE"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried plan.</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">integer</code></td>
<td>Number of items to retrieve.</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">integer</code></td>
<td>Which page to retrieve. <em>default page size is 50</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <br> If missing, the default is <code class="prettyprint">-created</code>.</td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted products are also listed.</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Return subscriptions with a specific <a href="#subscriptions"><code class="prettyprint">Subscription</code></a> <code class="prettyprint">status</code>.</td>
</tr>
<tr>
<td>method</td>
<td><code class="prettyprint">string</code></td>
<td>Return subscriptions with a specific <a href="#Subscriptions"><code class="prettyprint">Subscription</code></a> <code class="prettyprint">method</code>.</td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format <em>default is None</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format <em>default is None</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used to filter results. <em>default is created</em></td>
</tr>
</tbody></table>

          <h1 id="payment-methods">Payment Methods</h1>

<p>Payment Methods allow you to use multiple payment systems:
Credit Card (Stripe, Braintree, etc.), PayPal, DIBS and more.
Other integrations available on request.</p>

<p>You can also retrieve this information later for recurring payments or
however you may require.</p>

<p>The user has a <code class="prettyprint">default_payment_method</code> which can be updated in the user object. This default payment method corresponds to the last payment method used by the user to pay for an order.</p>

<h2 id="payment-method-object">Payment Method object</h2>

<p>A payment method object varies according to the system,
however there are some fields which will always be present.</p>

<table><thead>
<tr>
<th>Attributes</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Type of Payment Method. Currently acceptable methods: <code class="prettyprint">stripe</code>, <code class="prettyprint">dibs</code>, <code class="prettyprint">paypal</code>, <code class="prettyprint">single_paypal</code>, <code class="prettyprint">future_paypal</code>.</td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>Name of the Payment Method - to be shown to final customer, if desired.</td>
</tr>
<tr>
<td>user</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#users"><code class="prettyprint">User</code></a> associated with Payment Method.</td>
</tr>
</tbody></table>

<h2 id="dibs">DIBS</h2>

<p>DIBS is a Norwegian payments gateway. It works based on callbacks made via their servers to ours. This callback contains the information about the credit card that was created and we store that as a Payment Method object.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/dibs/payment_method
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/dibs/payment_method</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dibs"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-merchant-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"transact"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123123"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"share-api-key-header"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;api-key&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"share-authorization-header"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bearer &lt;jwt&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cardnomask"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXXXXXXXXXX0000"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cardprefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"510010"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"paytype"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MC"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"orderid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-order-id&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dibs"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DIBS"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"merchant"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-merchant&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"ticket"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-ticket-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"purchase_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-order-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"masked_card_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"XXXXXXXXXXXX1234"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"card_prefix"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"card_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"VISA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"expiry_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"06/16"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"cardholder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"callback_data"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Must be &ldquo;dibs&rdquo; for triggering a DIBS payment method</td>
</tr>
<tr>
<td><strong>merchant</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Merchant id of company</td>
</tr>
<tr>
<td><strong>transact</strong></td>
<td><code class="prettyprint">object</code></td>
<td>ID of card (ticket)</td>
</tr>
<tr>
<td><strong>orderid</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Unique order ID</td>
</tr>
<tr>
<td><strong>share-authorization-header</strong></td>
<td><code class="prettyprint">string</code></td>
<td>JWT token used for authentication the user</td>
</tr>
<tr>
<td><strong>share-api-key-header</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Bearer token used for API access</td>
</tr>
<tr>
<td>cardnomask</td>
<td><code class="prettyprint">string</code></td>
<td>The last four numbers of the users credit card, e.g., &ldquo;XXXXXXXXXXXX1234&rdquo;</td>
</tr>
<tr>
<td>cardprefix</td>
<td><code class="prettyprint">string</code></td>
<td>First 5 numbers of the card (for type check: VISA, MasterCard, etc.)</td>
</tr>
<tr>
<td>paytype</td>
<td><code class="prettyprint">string</code></td>
<td>Type of credit card: MC, VISA, etc.</td>
</tr>
<tr>
<td>expdate</td>
<td><code class="prettyprint">string</code></td>
<td>Expiration date on the credit card</td>
</tr>
<tr>
<td>cardholder_name</td>
<td><code class="prettyprint">string</code></td>
<td>The name of the card holder</td>
</tr>
</tbody></table>

<h2 id="paypal">Paypal</h2>

<p>Paypal allows for 2 types of payments: Single Payments or Future Payments. A Single Payment is the most usual type of transaction and common for simple authentication and capturing of transactions. Future Payments are mostly used for charging the user several times, after giving their consent.</p>

<h2 id="single-payment-paypal">Single Payment (PayPal)</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/payment_methods
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/payment_methods</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"single_paypal"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payer-id&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"single_paypal"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PayPal"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-payment-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-payer-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;sandbox-live&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>In this case, the website/app will create a Payment using their own SDK and then send it to the API for verification and capture. The payment must be in the state <code class="prettyprint">approved</code>, otherwise the API will return a <code class="prettyprint">403</code> error.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>This is the ID of the payment. The payment recieves a verification to see if its state is &ldquo;approved&rdquo;, otherwise an exception is raised, <code class="prettyprint">403</code>.</td>
</tr>
<tr>
<td><strong>payer_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The payment ID created by PayPal.</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>This must be <code class="prettyprint">single_paypal</code>.</td>
</tr>
</tbody></table>

<h2 id="future-payments-paypal">Future Payments (PayPal)</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/payment_methods
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/payment_methods</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future_paypal"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-code&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"future_paypal"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PayPal"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"authorization_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-auth-code&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"refresh_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;some-refresh-token&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"correlation_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Device ID"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;sandbox-live&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This feature is only available for the mobile SDK.  To use it, the app sends the API an authorization code. The API is then exchanged for a Refresh Token, which is also stored in the object. When paying for an invoice, you should also add the <code class="prettyprint">PayPal-Client-Metadata-Id</code> header to the API <code class="prettyprint">/payments</code> in <a href="#payments">Payments</a>.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>code</strong></td>
<td><code class="prettyprint">string</code></td>
<td>This is an authorization code sent by the mobile app to be exchanged for a Refresh Token.</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>This must be <code class="prettyprint">future_paypal</code>.</td>
</tr>
</tbody></table>

<h2 id="stripe">Stripe</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/payment_methods
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/payment_methods</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tok_1Bv5yfEeeXxFpLJtpWYeGYuy"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"stripe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Stripe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cus_CJjTlT4Wci2P0u"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tok_1Bv5yfEeeXxFpLJtpWYeGYuy"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"card"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"object"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_state"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fingerprint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npPw68vQg1usKUWb"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"exp_year"</span><span class="p">:</span><span class="w"> </span><span class="mi">2019</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last4"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4242"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_zip_check"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_zip"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"funding"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cvc_check"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unchecked"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"card_1Bv5yfEeeXxFpLJtPBVfQ1wZ"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"tokenization_method"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_line1"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"exp_month"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
    </span><span class="s2">"brand"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"dynamic_last4"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_country"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_line2"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_line1_check"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"address_city"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Must be &ldquo;stripe&rdquo; for triggering a STRIPE payment method</td>
</tr>
<tr>
<td><strong>token</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Token created with the card details (number, expiration month, expiration year, cvc)</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-payment-method">Retrieve a Payment Method</h2>

<p>Retrieves the payment method with a given ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/payment_methods/&lt;payment-method-id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/payment_methods/&lt;payment-method-id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"masked_card_number"</span><span class="p">:</span><span class="s2">"XXXXXXXXXXXX1234"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"merchant"</span><span class="p">:</span><span class="s2">"some_merchant_id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"dibs"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475254021326</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"ticket"</span><span class="p">:</span><span class="s2">"some_ticket_id"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475254021326</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment-method-id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>This is the unique ID of the queried payment method.</td>
</tr>
</tbody></table>

<h2 id="list-all-payment-methods">List all Payment Methods</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/payment_methods
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/payment_methods</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"masked_card_number"</span><span class="p">:</span><span class="s2">"XXXXXXXXXXXX1234"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"merchant"</span><span class="p">:</span><span class="s2">"some_merchant_id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"dibs"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475254021326</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"ticket"</span><span class="p">:</span><span class="s2">"some_ticket_id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475254021326</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all Payment Methods associated with the user.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>number of items to retrieve</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>which page to retrieve <em>default page size is 10</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>field used for sorting results</td>
</tr>
</tbody></table>

<h2 id="delete-payment-method">Delete payment method</h2>

<p>Delete the payment method associated with the user.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE https://api.kvass.ai/payment_methods/&lt;payment_method_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/payment_methods/&lt;payment_method_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment-method-id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>This is the unique ID of the payment method.</td>
</tr>
</tbody></table>

          <h1 id="payments">Payments</h1>

<p>There are multiple allowed subjects you can pay for, including Orders, Invoices or Subscriptions. Moreover, you&rsquo;re also allowed to make single payments, not associated with the aforementioned subjects.</p>

<p>When you want to pay for an Order or Invoice (single or multiple items) you need to use the Payment object. Together with a
<a href="#payment-methods">Payment Method</a>, among other fields, you&rsquo;ll be able to create and process payments, as well
as listing all available payments.</p>

<p>When paying for an <a href="#invoices">Invoice</a> you can also provide the API with a <code class="prettyprint">payment_date</code> which allows you to schedule payments
for later. If no <code class="prettyprint">payment_date</code> is provided, the Invoice&rsquo;s <code class="prettyprint">due_date</code> will become the <code class="prettyprint">payment_date</code>.</p>

<h2 id="payment-object">Payment object</h2>

<p>A payment object contains the following attributes.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>user</strong></td>
<td><code class="prettyprint">object</code></td>
<td><a href="#Users"><code class="prettyprint">User</code></a> associated with Payment</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td><code class="prettyprint">number</code></td>
<td>Amount as a Float with decimal points (<code class="prettyprint">.</code>). <em>Example: 10.23 NOK</em></td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td><code class="prettyprint">string</code></td>
<td>3 letter ISO currency code as defined by <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a></td>
</tr>
<tr>
<td><strong>human_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Human readable ID. 6 character long</td>
</tr>
<tr>
<td><strong>subject</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Either an Invoice or Order reference</td>
</tr>
<tr>
<td><strong>current_state</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Current state of operation. Can be one of: <code class="prettyprint">created</code>, <code class="prettyprint">processing</code>, <code class="prettyprint">captured</code>, <code class="prettyprint">succeeded</code>, <code class="prettyprint">failed</code> and `cancelled</td>
</tr>
<tr>
<td>payment_date</td>
<td><code class="prettyprint">object</code></td>
<td>Date (<code class="prettyprint">timestamp</code> format) for scheduling payment of invoices. Defaults to the due_date of each invoice</td>
</tr>
<tr>
<td>payment_method</td>
<td><code class="prettyprint">string</code></td>
<td>ID of already created Payment Method</td>
</tr>
<tr>
<td>billing_address</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#address"><code class="prettyprint">Address</code></a> object with billing details if supported by payment provider.</td>
</tr>
<tr>
<td>description</td>
<td><code class="prettyprint">string</code></td>
<td>Some additional description, if wanted and if supported by payment provider.</td>
</tr>
<tr>
<td>metadata</td>
<td><code class="prettyprint">array</code></td>
<td>Additional information on the payment if supported by payment provider.</td>
</tr>
<tr>
<td>status_code</td>
<td><code class="prettyprint">string</code></td>
<td>In case the payment fails, this will have some code from the chosen payment method backend. <em>(if existing)</em></td>
</tr>
<tr>
<td>error_message</td>
<td><code class="prettyprint">string</code></td>
<td>In case the payment fails, this will have the reason in a textual way. <em>(if existing)</em></td>
</tr>
</tbody></table>

<h2 id="process-single-payment">Process Single Payment</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/payments
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/payments</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.00</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Single payment"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">50.0</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"current_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"human_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51Q4LN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Single payment"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">147998016470</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>amount</strong></td>
<td><code class="prettyprint">number</code></td>
<td>Amount as a Float with decimal points (<code class="prettyprint">.</code>). <em>Example: 10.23 NOK</em></td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td><code class="prettyprint">string</code></td>
<td>3 letter ISO currency code as defined by <a href="https://en.wikipedia.org/wiki/ISO_4217">ISO 4217</a>. If not present, default will be Company&rsquo;s currency. Otherwise it will raise an error</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Selected payment method id to use.</td>
</tr>
<tr>
<td>description</td>
<td><code class="prettyprint">string</code></td>
<td>Some additional description, if wanted and supported by payment provider.</td>
</tr>
<tr>
<td>metadata</td>
<td><code class="prettyprint">array</code></td>
<td>Additional information on the payment if supported by payment provider.</td>
</tr>
<tr>
<td>billing_address</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#address"><code class="prettyprint">Address</code></a> object with billing details if supported by payment provider.</td>
</tr>
</tbody></table>

<h2 id="process-orders-payment">Process Orders Payment</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/payments
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/payments</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"orders"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;order-id&gt;"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">450.2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"current_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"human_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51Q4LN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;order-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">147998016470</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>orders</strong></td>
<td><code class="prettyprint">array</code></td>
<td>List with <a href="#orders"><code class="prettyprint">Orders</code></a> to be paid.</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Selected payment method id to use.</td>
</tr>
</tbody></table>

<h2 id="process-invoices-payment">Process Invoices Payment</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/payments
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/payments</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"invoices"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;invoice-id&gt;"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">450.2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"current_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"human_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51Q4LN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;invoice-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">147998016470</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoices</strong></td>
<td><code class="prettyprint">array</code></td>
<td>List with <a href="#invoices"><code class="prettyprint">Invoices</code></a> to be paid.</td>
</tr>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Selected payment method id to use.</td>
</tr>
<tr>
<td>payment_date</td>
<td><code class="prettyprint">number</code></td>
<td>Date (<code class="prettyprint">timestamp</code> format) for scheduling payment of <strong>invoices</strong>. Defaults to the <code class="prettyprint">due_date</code> of each invoice or now.</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-payment">Retrieve a Payment</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/payments/&lt;payment-id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/payments/&lt;payment-id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-id&gt;"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">450.2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
  </span><span class="s2">"current_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"human_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51rQxLN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;invoice-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"payment_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">147998016470</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves the payment with a given ID.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment-id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried payment</td>
</tr>
</tbody></table>

<h2 id="list-all-payments">List all Payments</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/payments/
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/payments</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-id&gt;"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1476118043580</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">450.2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
    </span><span class="s2">"current_state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"human_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51Q4LN"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111434"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payment_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">147998016470</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all Payments associated with the user.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <em>default is -modified</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used for filter results.</td>
</tr>
<tr>
<td>current_state</td>
<td><code class="prettyprint">string</code></td>
<td>Status of Payments to filter by</td>
</tr>
</tbody></table>

<h2 id="update-payment">Update payment</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/payments/&lt;payment_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/payments/&lt;payment_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight plaintext"><code>HTTP/1.1 200 OK
Content-Type: application/json

</code></pre>
<p>Update a payment. Editable fields:</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>active</td>
<td><code class="prettyprint">boolean</code></td>
<td>Boolean field. <em>default is <code class="prettyprint">True</code></em></td>
</tr>
<tr>
<td>payment_method</td>
<td><code class="prettyprint">string</code></td>
<td>Id for payment method</td>
</tr>
<tr>
<td>billing_address</td>
<td><code class="prettyprint">string</code></td>
<td>Address to whom the payment is to</td>
</tr>
<tr>
<td>payment_date</td>
<td><code class="prettyprint">number</code></td>
<td>Update payment date, <code class="prettyprint">timestamp</code> format. Default payment date is <code class="prettyprint">due_date</code> for invoices. This will override the <code class="prettyprint">due_date</code></td>
</tr>
</tbody></table>

          <h1 id="phone-number-verification">Phone Number Verification</h1>

<p>The phone number verification API allows you to verify a user&rsquo;s phone numbers, using
<a href="https://www.nexmo.com/products/verify">Nexmo</a>&lsquo;s sms verification service.</p>

<p>This process is divided into two stages:</p>

<ol>
<li>Sending the phone number and generating a PIN code and Request ID. An SMS is sent to the user with that same PIN code.</li>
<li>Validating the PIN code input given by the user.</li>
</ol>

<h2 id="1-send-pin-code-to-user">1. Send PIN code to User</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/sms/verify
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/sms/verify</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"004712345678"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"request_id"</span><span class="p">:</span><span class="s2">"2d426b2552e1446bb3d234e7298c21f9"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Given a phone number, the API will send a verification PIN code to the user and you should store the <code class="prettyprint">request_id</code> resulting from this call.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>phone_number</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Phone number of the associated user</td>
</tr>
</tbody></table>

<h2 id="2-validate-pin-code-and-phone-number">2. Validate PIN code and phone number</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/sms/verify
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/sms/verify</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"request_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2d426b2552e1446bb3d234e7298c21f9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">No Content</span>
</code></pre>
<p>Using the <code class="prettyprint">request_id</code> stored from the API call above, together with the PIN code the user has input, this call will verify that the code is correct.</p>

<p>The validation is successful if the status code of the response is <code class="prettyprint">204</code>.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>request_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Request ID returned from the API</td>
</tr>
<tr>
<td><strong>code</strong></td>
<td><code class="prettyprint">string</code></td>
<td>PIN code received by the user</td>
</tr>
</tbody></table>

          <h1 id="products">Products</h1>

<h2 id="product-object">Product Object</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The name of the product</td>
</tr>
<tr>
<td><strong>currency</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Three letter currency code in standard ISO 4217 format.</td>
</tr>
<tr>
<td>price</td>
<td><code class="prettyprint">number</code></td>
<td>The price of the product</td>
</tr>
<tr>
<td>price_change_percentage</td>
<td><code class="prettyprint">number</code></td>
<td>How much percentage the products changes the price</td>
</tr>
<tr>
<td>description</td>
<td><code class="prettyprint">string</code></td>
<td>A full description of the product</td>
</tr>
<tr>
<td>short_description</td>
<td><code class="prettyprint">string</code></td>
<td>A brief description of the product</td>
</tr>
<tr>
<td>main_product</td>
<td><code class="prettyprint">boolean</code></td>
<td>Flag that marks whether or not it is a main product</td>
</tr>
<tr>
<td>_sub_products</td>
<td><code class="prettyprint">array</code></td>
<td>A list of sub products under the main product</td>
</tr>
<tr>
<td>parents</td>
<td><code class="prettyprint">array</code></td>
<td>The sub product&rsquo;s parent</td>
</tr>
<tr>
<td>default_position</td>
<td><code class="prettyprint">array</code></td>
<td>The geo position for the product</td>
</tr>
<tr>
<td>tags</td>
<td><code class="prettyprint">array</code></td>
<td>List of tags associated with the product</td>
</tr>
<tr>
<td>properties</td>
<td><code class="prettyprint">object</code></td>
<td>The product&rsquo;s properties</td>
</tr>
<tr>
<td>vat</td>
<td><code class="prettyprint">number</code></td>
<td>The percentage of VAT in the product price</td>
</tr>
<tr>
<td>max_distance</td>
<td><code class="prettyprint">number</code></td>
<td></td>
</tr>
<tr>
<td>slug</td>
<td><code class="prettyprint">string</code></td>
<td></td>
</tr>
</tbody></table>

<h3 id="price-and-price_change_percentage">Price and price_change_percentage</h3>

<p>When creating a product, you need one of the fields <code class="prettyprint">price</code> or <code class="prettyprint">price_change_percentage</code>.
The <code class="prettyprint">price_change_percentage</code> could be used in the order.items when creating an order.</p>

<h2 id="create-a-new-product">Create a New Product</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/products
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/products</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"It is a test product"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.14</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product Name"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"vat"</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">  
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"max_distance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1492777046366</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"default_position"</span><span class="p">:[</span><span class="w">  
      </span><span class="mi">-1</span><span class="p">,</span><span class="w">
      </span><span class="mi">-1</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"Product"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1492777046369</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"_sub_products"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Product Name"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"properties"</span><span class="p">:{},</span><span class="w">
   </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">3.14</span><span class="p">,</span><span class="w">
   </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"vat"</span><span class="p">:</span><span class="mf">15.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"parents"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"main_product"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"/"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This creates a new Product.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Name of the product</td>
</tr>
<tr>
<td><strong>price</strong></td>
<td><code class="prettyprint">number</code></td>
<td>Price of the product</td>
</tr>
<tr>
<td>currency</td>
<td><code class="prettyprint">string</code></td>
<td>Currency of the product <em>default set to <code class="prettyprint">NOK</code></em></td>
</tr>
<tr>
<td>vat</td>
<td><code class="prettyprint">number</code></td>
<td>Percentage of price to be paid for VAT <em>default set to <code class="prettyprint">0.0</code></em></td>
</tr>
<tr>
<td>description</td>
<td><code class="prettyprint">string</code></td>
<td>Full description of the product</td>
</tr>
<tr>
<td>short_description</td>
<td><code class="prettyprint">string</code></td>
<td>Short description for the product</td>
</tr>
<tr>
<td>path</td>
<td><code class="prettyprint">string</code></td>
<td>URL for the product <em>default set to <code class="prettyprint">&#39;/&#39;</code></em></td>
</tr>
<tr>
<td>main_product</td>
<td><code class="prettyprint">boolean</code></td>
<td>Flag that marks whether or not it is a main product <em>default set to <code class="prettyprint">True</code></em></td>
</tr>
<tr>
<td>_sub_product</td>
<td><code class="prettyprint">array</code></td>
<td>List of sub products under the product. <em>default set to <code class="prettyprint">[]</code></em></td>
</tr>
<tr>
<td>parents</td>
<td><code class="prettyprint">array</code></td>
<td>List of the parent products to the sub product. <em>default set to <code class="prettyprint">[]</code></em></td>
</tr>
<tr>
<td>tags</td>
<td><code class="prettyprint">string</code></td>
<td>List of tags associated with the product</td>
</tr>
<tr>
<td>default_position</td>
<td><code class="prettyprint">array</code></td>
<td>Geo position of the product <em>default set to <code class="prettyprint">[-1, -1]</code></em></td>
</tr>
<tr>
<td>properties</td>
<td><code class="prettyprint">object</code></td>
<td>The product&rsquo;s properties</td>
</tr>
<tr>
<td>max_distance</td>
<td><code class="prettyprint">number</code></td>
<td></td>
</tr>
<tr>
<td>provider</td>
<td><code class="prettyprint">string</code></td>
<td>The <a href="#providers"><code class="prettyprint">provider</code></a> assigned to the product, defined by the provider&rsquo;s ID</td>
</tr>
<tr>
<td>company_take</td>
<td><code class="prettyprint">number</code></td>
<td></td>
</tr>
<tr>
<td>business_rules</td>
<td><code class="prettyprint">array</code></td>
<td></td>
</tr>
<tr>
<td>slug</td>
<td><code class="prettyprint">array</code></td>
<td></td>
</tr>
</tbody></table>

<h2 id="retrieve-a-product">Retrieve a Product</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/products/&lt;product_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/products/&lt;product_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">  
   </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"Product"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"parents"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"tags"</span><span class="p">:[</span><span class="s2">"fuzz"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bar"</span><span class="p">],</span><span class="w">
   </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">3.14</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_sub_products"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"max_distance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"description"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1492781492460</span><span class="p">},</span><span class="w">
   </span><span class="s2">"vat"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"properties"</span><span class="p">:{},</span><span class="w">
   </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Product Name"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1492781492461</span><span class="p">},</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"/"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"main_product"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
   </span><span class="s2">"business_rules"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"default_position"</span><span class="p">:[</span><span class="mi">-1</span><span class="p">,</span><span class="mi">-1</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get a Product based on the product&rsquo;s unique ID.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>product_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The product&rsquo;s ID</td>
</tr>
</tbody></table>

<h2 id="get-list-of-all-products-associated-with-a-company">Get List of All Products Associated with a Company</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/products
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/products</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">  
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"Product"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"parents"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"tags"</span><span class="p">:[</span><span class="s2">"fuzz"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bar"</span><span class="p">],</span><span class="w">
       </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">3.14</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_sub_products"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"max_distance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"description"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1492781492460</span><span class="p">},</span><span class="w">
       </span><span class="s2">"vat"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"properties"</span><span class="p">:{},</span><span class="w">
       </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
       </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Product Name"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1492781492461</span><span class="p">},</span><span class="w">
       </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"/"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"main_product"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"business_rules"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"default_position"</span><span class="p">:[</span><span class="mi">-1</span><span class="p">,</span><span class="mi">-1</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all Products.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used to filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>lat</td>
<td><code class="prettyprint">number</code></td>
<td>Define the latitude.</td>
</tr>
<tr>
<td>lng</td>
<td><code class="prettyprint">number</code></td>
<td>Define the longitude.</td>
</tr>
<tr>
<td>all</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, get all products.</td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted products are also listed.</td>
</tr>
</tbody></table>

<h2 id="search-products">Search Products</h2>

<p>Retrieves a list of all Products associated with the search.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/products/search
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/products/search?query=description</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"Product"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"parents"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"tags"</span><span class="p">:[</span><span class="s2">"fuzz"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Foo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Bar"</span><span class="p">],</span><span class="w">
       </span><span class="s2">"price"</span><span class="p">:</span><span class="mf">3.14</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_sub_products"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"company_take"</span><span class="p">:</span><span class="mf">-1.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"max_distance"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"description"</span><span class="p">:</span><span class="s2">"description"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1492781492460</span><span class="p">},</span><span class="w">
       </span><span class="s2">"vat"</span><span class="p">:</span><span class="mf">0.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"properties"</span><span class="p">:{},</span><span class="w">
       </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
       </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Product Name"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1492781492461</span><span class="p">},</span><span class="w">
       </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"currency"</span><span class="p">:</span><span class="s2">"NOK"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"path"</span><span class="p">:</span><span class="s2">"/"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"main_product"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
       </span><span class="s2">"business_rules"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"default_position"</span><span class="p">:[</span><span class="mi">-1</span><span class="p">,</span><span class="mi">-1</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>What you want to search for, e.g., <strong>name</strong>, <strong>description</strong>, or <strong>id</strong>.</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used to filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>lat</td>
<td><code class="prettyprint">number</code></td>
<td>Define the latitude.</td>
</tr>
<tr>
<td>lng</td>
<td><code class="prettyprint">number</code></td>
<td>Define the longitude.</td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted products are also listed.</td>
</tr>
</tbody></table>

<h2 id="add-sub-products-to-product">Add sub-products to product</h2>

<p>The product could have multiple sub-products associated with the product.
These are found in the field <code class="prettyprint">_sub_products</code>.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>product_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The product&rsquo;s ID</td>
</tr>
</tbody></table>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/products/&lt;product_id&gt;/sub_products
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/products/&lt;product_id&gt;/sub_products</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"add"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="err">&lt;product_id&gt;</span><span class="p">,</span><span class="w"> </span><span class="err">&lt;product_id&gt;</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
          <h1 id="providers">Providers</h1>

<p>Provider is a child class of <a href="#users"><code class="prettyprint">User</code></a>. They are users that provide
services to other users.</p>

<h2 id="provider-object">Provider object</h2>

<table><thead>
<tr>
<th>Attributes</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>max_travel_time</td>
<td><code class="prettyprint">number</code></td>
<td>The maximum travel time, in hours. <em>default is 1.0</em></td>
</tr>
<tr>
<td>max_travel_meters</td>
<td><code class="prettyprint">number</code></td>
<td>The maximum travel distance, in meters. <em>default is 10000.0</em></td>
</tr>
<tr>
<td>default_position</td>
<td><code class="prettyprint">array</code></td>
<td>The provider&rsquo;s default position.</td>
</tr>
<tr>
<td>default_address</td>
<td><code class="prettyprint">object</code></td>
<td>The provider&rsquo;s default <a href="#address"><code class="prettyprint">Address</code></a>.</td>
</tr>
<tr>
<td>schedule</td>
<td><code class="prettyprint">object</code></td>
<td>The provider&rsquo;s schedule.</td>
</tr>
<tr>
<td>orders</td>
<td><code class="prettyprint">array</code></td>
<td>List of <a href="#orders"><code class="prettyprint">Orders</code></a>.</td>
</tr>
<tr>
<td>products</td>
<td><code class="prettyprint">array</code></td>
<td>List of <a href="#products"><code class="prettyprint">Products</code></a> the provider provides.</td>
</tr>
<tr>
<td>available_on_bank_holidays</td>
<td><code class="prettyprint">boolean</code></td>
<td>Indicates if the provider wishes to be available on bank holidays.  <em>default <code class="prettyprint">false</code></em></td>
</tr>
<tr>
<td>country</td>
<td><code class="prettyprint">string</code></td>
<td>The provider&rsquo;s country. <em>default <code class="prettyprint">NOR</code></em></td>
</tr>
<tr>
<td>roles</td>
<td><code class="prettyprint">array</code></td>
<td>Define the roles that a provider can have. <em>Default is provider</em></td>
</tr>
</tbody></table>

<h2 id="add-a-new-provider">Add a New Provider</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/providers
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/providers</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Roe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4712345678"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"max_travel_meters"</span><span class="p">:</span><span class="mf">10000.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495195975641</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee147d57ba28fbe0a3892"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"default_address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"roles"</span><span class="p">:[</span><span class="w">
      </span><span class="s2">"provider"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"national_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"NOR"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"auth0_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"jane@email.com"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"voucher"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"consumed"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"uuid"</span><span class="p">:</span><span class="s2">"0000aaaa-aaaa-0000-aaaa-aaaa0000aa00"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495195975643</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"expires"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1526731975643</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"initial_quantity"</span><span class="p">:</span><span class="mi">0</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Roe"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"addresses"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"schedule"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"day_of_week"</span><span class="p">:[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"end_minute"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_hour"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_minute"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"day_of_week"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"end_hour"</span><span class="p">:</span><span class="mi">0</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"end_minute"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_hour"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_minute"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"day_of_week"</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span><span class="w">
            </span><span class="s2">"end_hour"</span><span class="p">:</span><span class="mi">0</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"working_sections"</span><span class="p">:[],</span><span class="w">
      </span><span class="s2">"valid_from"</span><span class="p">:{</span><span class="w">
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495195200000</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"billing_address"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"orders"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1495195975643</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"max_travel_time"</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"products"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"available_on_bank_holidays"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User.Provider"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Creates a new Provider.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>first_name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Provider&rsquo;s first name</td>
</tr>
<tr>
<td><strong>last_name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Provider&rsquo;s last name</td>
</tr>
<tr>
<td>email</td>
<td><code class="prettyprint">string</code></td>
<td>Provider&rsquo;s e-mail address</td>
</tr>
<tr>
<td>mobile_phone_number</td>
<td><code class="prettyprint">string</code></td>
<td>Provider&rsquo;s phone number</td>
</tr>
<tr>
<td>billing_address</td>
<td><code class="prettyprint">string</code></td>
<td>Provider&rsquo;s billing address</td>
</tr>
<tr>
<td>bio</td>
<td><code class="prettyprint">string</code></td>
<td>Biographic note about the provider</td>
</tr>
</tbody></table>

<h2 id="retrieve-a-provider">Retrieve a Provider</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/providers/&lt;provider_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/providers/&lt;provider_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">  
   </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"jane@email.com"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee147d57ba28fbe0a3892"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"auth0_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"tags"</span><span class="p">:[</span><span class="w">  
      </span><span class="s2">"fuzz"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"available_on_bank_holidays"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"voucher"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"initial_quantity"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">  
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1493962078102</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"expires"</span><span class="p">:{</span><span class="w">  
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1525498078102</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"uuid"</span><span class="p">:</span><span class="s2">"e9878af0-c607-486c-872f-6e23e7a15821"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consumed"</span><span class="p">:</span><span class="mi">0</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"orders"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"max_travel_time"</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1493962078119</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"schedule"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"day_of_week"</span><span class="p">:[</span><span class="w">  
         </span><span class="p">{</span><span class="w">  
            </span><span class="s2">"end_hour"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
            </span><span class="s2">"day_of_week"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"end_minute"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_minute"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_hour"</span><span class="p">:</span><span class="mi">8</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">  
            </span><span class="s2">"end_hour"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
            </span><span class="s2">"day_of_week"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"end_minute"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_minute"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
            </span><span class="s2">"start_hour"</span><span class="p">:</span><span class="mi">8</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"valid_from"</span><span class="p">:{</span><span class="w">  
         </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1493098078525</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"working_sections"</span><span class="p">:[]</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"max_travel_meters"</span><span class="p">:</span><span class="mf">10000.0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"NOR"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Roe"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User.Provider"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"billing_address"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"products"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"addresses"</span><span class="p">:[],</span><span class="w">
   </span><span class="s2">"national_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1493962078526</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">  
      </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
   </span><span class="s2">"roles"</span><span class="p">:[</span><span class="w">  
      </span><span class="s2">"provider"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves the Provider with a particular ID</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>provider_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the queried provider</td>
</tr>
</tbody></table>

<h2 id="list-all-providers">List All Providers</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/providers
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/providers</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">  
       </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"jane@email.com"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_id"</span><span class="p">:{</span><span class="w">  
          </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"591ee147d57ba28fbe0a3892"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"auth0_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"tags"</span><span class="p">:[</span><span class="w">  
          </span><span class="s2">"fuzz"</span><span class="w">
       </span><span class="p">],</span><span class="w">
       </span><span class="s2">"available_on_bank_holidays"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"voucher"</span><span class="p">:{</span><span class="w">  
          </span><span class="s2">"initial_quantity"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">  
             </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1493962078102</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"expires"</span><span class="p">:{</span><span class="w">  
             </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1525498078102</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"uuid"</span><span class="p">:</span><span class="s2">"e9878af0-c607-486c-872f-6e23e7a15821"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"consumed"</span><span class="p">:</span><span class="mi">0</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"orders"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"max_travel_time"</span><span class="p">:</span><span class="mf">1.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created"</span><span class="p">:{</span><span class="w">  
          </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1493962078119</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"schedule"</span><span class="p">:{</span><span class="w">  
          </span><span class="s2">"day_of_week"</span><span class="p">:[</span><span class="w">  
             </span><span class="p">{</span><span class="w">  
                </span><span class="s2">"end_hour"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
                </span><span class="s2">"day_of_week"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"end_minute"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
                </span><span class="s2">"start_minute"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
                </span><span class="s2">"start_hour"</span><span class="p">:</span><span class="mi">8</span><span class="w">
             </span><span class="p">},</span><span class="w">
             </span><span class="p">{</span><span class="w">  
                </span><span class="s2">"end_hour"</span><span class="p">:</span><span class="mi">18</span><span class="p">,</span><span class="w">
                </span><span class="s2">"day_of_week"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"end_minute"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
                </span><span class="s2">"start_minute"</span><span class="p">:</span><span class="mi">30</span><span class="p">,</span><span class="w">
                </span><span class="s2">"start_hour"</span><span class="p">:</span><span class="mi">8</span><span class="w">
             </span><span class="p">}</span><span class="w">
          </span><span class="p">],</span><span class="w">
          </span><span class="s2">"valid_from"</span><span class="p">:{</span><span class="w">  
             </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1493098078525</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="s2">"working_sections"</span><span class="p">:[]</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"max_travel_meters"</span><span class="p">:</span><span class="mf">10000.0</span><span class="p">,</span><span class="w">
       </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"NOR"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Roe"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User.Provider"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"billing_address"</span><span class="p">:{</span><span class="w">  
          </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"active"</span><span class="p">:</span><span class="kc">true</span><span class="p">,</span><span class="w">
       </span><span class="s2">"products"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"addresses"</span><span class="p">:[],</span><span class="w">
       </span><span class="s2">"national_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
       </span><span class="s2">"modified"</span><span class="p">:{</span><span class="w">  
          </span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1493962078526</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"company"</span><span class="p">:{</span><span class="w">  
          </span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="w">
       </span><span class="p">},</span><span class="w">
       </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
       </span><span class="s2">"roles"</span><span class="p">:[</span><span class="w">  
          </span><span class="s2">"provider"</span><span class="w">
       </span><span class="p">],</span><span class="w">
       </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all Providers.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">integer</code></td>
<td>Number of items to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">integer</code></td>
<td>Which page to retrieve. <em>default is 0</em></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted products are also listed. <em>default is <code class="prettyprint">false</code></em></td>
</tr>
<tr>
<td>latitude</td>
<td><code class="prettyprint">number</code></td>
<td>Define the latitude. <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>longitude</td>
<td><code class="prettyprint">number</code></td>
<td>Define the longitude. <em>default is <code class="prettyprint">None</code></em></td>
</tr>
</tbody></table>

          <h1 id="resources">Resources</h1>

<p>The resource model is <a href="#Users"><code class="prettyprint">User</code></a> specific attributes, assets or retail resources;
resources they possess or that under their ownership. The resource
could have name, description and a chosen reference id. Additionally, it can have
an image and product associated with it.</p>

<p>There is two types of resources, <code class="prettyprint">asset</code> or <code class="prettyprint">retail</code>. If not specified, an <code class="prettyprint">asset</code> resource
 is created. The <code class="prettyprint">asset</code> resource is an asset that belongs to the user. The <code class="prettyprint">retail</code> resource is
  a sellable object that the user possess, but is able to sell. Thus, it has a price, currency and VAT.</p>

<h2 id="resources-object">Resources Object</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><code class="prettyprint">object</code></td>
<td>The resource ID</td>
</tr>
<tr>
<td>method</td>
<td><code class="prettyprint">string</code></td>
<td>The resource type. <code class="prettyprint">asset</code> or <code class="prettyprint">retail</code>.</td>
</tr>
<tr>
<td>user</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#Users"><code class="prettyprint">User</code></a> associated with the resource</td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>Name of the resource item</td>
</tr>
<tr>
<td>description</td>
<td><code class="prettyprint">string</code></td>
<td>Description of the resource item</td>
</tr>
<tr>
<td>image_url</td>
<td><code class="prettyprint">string</code></td>
<td>Image associated with the resource</td>
</tr>
<tr>
<td>reference_id</td>
<td><code class="prettyprint">string</code></td>
<td>Reference ID associated with the resource</td>
</tr>
<tr>
<td>product</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#Products"><code class="prettyprint">Product</code></a> associated with the resource</td>
</tr>
<tr>
<td>tags</td>
<td><code class="prettyprint">array</code></td>
<td>An array of tags</td>
</tr>
<tr>
<td>human_id</td>
<td><code class="prettyprint">string</code></td>
<td>6 character ID.</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Status of the resource <em>default is <code class="prettyprint">CREATED</code>, other options are <code class="prettyprint">PROCESSING</code>, <code class="prettyprint">UTILIZED</code> or <code class="prettyprint">IDLE</code></em></td>
</tr>
</tbody></table>

<h2 id="retail-resource-object">Retail Resource Object</h2>

<p>In addition to the attributes in the <code class="prettyprint">asset</code> resource, the <code class="prettyprint">retail</code> resource has the following attributes.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_sub_products</td>
<td><code class="prettyprint">array</code></td>
<td>An array with sub-products associated with the resource</td>
</tr>
<tr>
<td>base_price</td>
<td><code class="prettyprint">number</code></td>
<td>The sum of the <code class="prettyprint">product.price</code> and price in all the <code class="prettyprint">_sub_products</code></td>
</tr>
<tr>
<td>retail_price</td>
<td><code class="prettyprint">number</code></td>
<td>The amount that this resource is sold for</td>
</tr>
<tr>
<td>currency</td>
<td><code class="prettyprint">string</code></td>
<td>The currency in the main product in the resource</td>
</tr>
<tr>
<td>vat</td>
<td><code class="prettyprint">number</code></td>
<td>The VAT from the main product in the resource</td>
</tr>
</tbody></table>

<h2 id="create-a-new-resource">Create a New Resource</h2>

<p>Create a new resource associated with the  <a href="#Users"><code class="prettyprint">User</code></a>.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/resources
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/resources</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc1234567890abc"</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500275774067</span><span class="p">},</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"596c643ed57ba203be2cf1c9"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc1234567890abc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"human_id"</span><span class="w"> </span><span class="s2">"1EBY8A"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500275774067</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>Name of the resource item</td>
</tr>
<tr>
<td>description</td>
<td><code class="prettyprint">string</code></td>
<td>Description of the resource item</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Status of the resource <em>default is <code class="prettyprint">CREATED</code>; other options are <code class="prettyprint">PROCESSING</code>, <code class="prettyprint">UTILIZED</code> or <code class="prettyprint">IDLE</code></em></td>
</tr>
<tr>
<td>product</td>
<td><code class="prettyprint">string</code></td>
<td><a href="#Products"><code class="prettyprint">Product</code></a> ID to be associated with the resource</td>
</tr>
<tr>
<td>image_url</td>
<td><code class="prettyprint">string</code></td>
<td>Image url associated with the resource</td>
</tr>
<tr>
<td>reference_id</td>
<td><code class="prettyprint">string</code></td>
<td>Customizable ID for the resource</td>
</tr>
</tbody></table>

<h2 id="create-several-new-resources-in-bulk">Create Several New Resources in Bulk</h2>

<p>This call creates several new resources for a <a href="#Users"><code class="prettyprint">User</code></a> in
one API call. Use the same attributes as when creating a new resource
for a user, but in an <code class="prettyprint">array</code>.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/resources/bulk
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/resources/bulk</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"method"</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the first resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of first resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc1234567890abc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the second resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of second resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdefghijklm"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502100873778</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"596c643ed57ba203be2cf1c9"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc1234567890abc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502100873778</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">}},</span><span class="w">
    </span><span class="p">{</span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502100873778</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"596c643ed57ba203be2cf1c9"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdefghijklm"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502100873778</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">}}</span><span class="w">
</span><span class="p">]</span><span class="w">

</span></code></pre>
<h2 id="retrieve-a-resource-by-id">Retrieve a Resource by ID</h2>

<p>Retrieve a resource based on its ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/resources/&lt;resource_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/resources/596c643ed57ba203be2cf1c9</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500275774067</span><span class="p">},</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"596c643ed57ba203be2cf1c9"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description of the resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc1234567890abc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name of resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CREATED"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500275774067</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<h2 id="update-resource">Update Resource</h2>

<p>Update attributes in a resource.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>Name of the resource item</td>
</tr>
<tr>
<td>description</td>
<td><code class="prettyprint">string</code></td>
<td>Description of the resource item</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Status of the resource <em>default is <code class="prettyprint">CREATED</code>; other options are <code class="prettyprint">PROCESSING</code>, <code class="prettyprint">UTILIZED</code> or <code class="prettyprint">IDLE</code></em></td>
</tr>
<tr>
<td>product</td>
<td><code class="prettyprint">string</code></td>
<td><a href="#Products"><code class="prettyprint">Product</code></a> ID to be associated with the resource</td>
</tr>
<tr>
<td>image_url</td>
<td><code class="prettyprint">string</code></td>
<td>Image url associated with the resource</td>
</tr>
<tr>
<td>reference_id</td>
<td><code class="prettyprint">string</code></td>
<td>Customizable ID for the resource</td>
</tr>
</tbody></table>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/resources/&lt;resource_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/resources/596c643ed57ba203be2cf1c9</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Resource 2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An updated Resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDLE"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500276434527</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"596c643ed57ba203be2cf1c9"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An updated Resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc1234567890abc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Resource 2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDLE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500275774067</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<h2 id="list-all-resources">List All Resources</h2>

<p>Return an <code class="prettyprint">array</code> with all resources associated with the request and company.
It is possible to add filters and sorting to the query.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/resources
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/resources</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the request also returns deleted resources</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of resources per page <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Defines which page to retrieve <em>default is 0</em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used to sort results <em>default is <code class="prettyprint">-created</code></em></td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Status of the resource <em>default is <code class="prettyprint">CREATED</code>; other options are <code class="prettyprint">PROCESSING</code>, <code class="prettyprint">UTILIZED</code> or <code class="prettyprint">IDLE</code></em></td>
</tr>
</tbody></table>

<h2 id="delete-resource">Delete Resource</h2>

<p>Delete the resource associated with the resource ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE https://api.kvass.ai/resources/&lt;resource_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/resources/596c643ed57ba203be2cf1c9</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500275774067</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An updated Resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Resource 2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc1234567890abc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDLE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"596c643ed57ba203be2cf1c9"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500278314163</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="resource-search">Resource Search</h2>

<p>Search by ID, name, reference_id, description and image_url. Returns
an <code class="prettyprint">array</code> that matches the query. Filter the query by using pagination.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>query</td>
<td><code class="prettyprint">string</code></td>
<td>Partial or full string of <code class="prettyprint">name</code>, <code class="prettyprint">reference_id</code>, <code class="prettyprint">description</code> or <code class="prettyprint">image_url</code></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the request also returns deleted resources</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of resources per page <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Defines which page to retrieve <em>default is 0</em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used to sort results <em>default is <code class="prettyprint">-created</code></em></td>
</tr>
</tbody></table>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/resources/search
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/resources/search?query=updated</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500275774067</span><span class="p">},</span><span class="w">
    </span><span class="s2">"method"</span><span class="w"> </span><span class="s2">"asset"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"An updated Resource"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://reference.kvass.ai/images/logo.png"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"reference_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc1234567890abc"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Resource 2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"58f9f856b70e2a56c4a0db3d"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"IDLE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"596c643ed57ba203be2cf1c9"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1500278314163</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<h2 id="resource-status">Resource Status</h2>

<p>Default status for the resource is <code class="prettyprint">CREATED</code>. Change the status
by updating the resource.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>CREATED</td>
<td>&ldquo;CREATED&rdquo;</td>
</tr>
<tr>
<td>PROCESSING</td>
<td>&ldquo;PROCESSING&rdquo;</td>
</tr>
<tr>
<td>UTILIZED</td>
<td>&ldquo;UTILIZED&rdquo;</td>
</tr>
<tr>
<td>IDLE</td>
<td>&ldquo;IDLE&rdquo;</td>
</tr>
<tr>
<td>ON_THE_WAY_FROM</td>
<td>&ldquo;ON_THE_WAY_FROM&rdquo;</td>
</tr>
<tr>
<td>ON_THE_WAY_TO</td>
<td>&ldquo;ON_THE_WAY_TO&rdquo;</td>
</tr>
<tr>
<td>DONE</td>
<td>&ldquo;DONE&rdquo;</td>
</tr>
</tbody></table>

          <h1 id="subscriptions">Subscriptions</h1>

<p>The Subscription method enables you to charge <a href="#Users"><code class="prettyprint">Customers</code></a> at
specified intervals set by a <a href="#Plans"><code class="prettyprint">Plan</code></a> of their choice.</p>

<p>We offer a <code class="prettyprint">license</code> subscription method. The customers will be
charged the amount specified in the plan at an interval set by the
plan.</p>

<h2 id="subscriptions-object">Subscriptions Object</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><code class="prettyprint">object</code></td>
<td>The subscription ID.</td>
</tr>
<tr>
<td>method</td>
<td><code class="prettyprint">string</code></td>
<td>Name of subscription method. <code class="prettyprint">license</code></td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>The name of the subscription type.</td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>A short description of the description.</td>
</tr>
<tr>
<td>user</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#Users"><code class="prettyprint">User</code></a> ID associated with the subscription.</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Status for the subscription. <em>default is <code class="prettyprint">CREATED</code>, also available are <code class="prettyprint">ACTIVE</code>, <code class="prettyprint">FUTURE</code>, <code class="prettyprint">NON_RENEWING</code>and <code class="prettyprint">CANCELLED</code></em></td>
</tr>
<tr>
<td>plan</td>
<td><code class="prettyprint">object</code></td>
<td>ID of the <a href="#Plans"><code class="prettyprint">Plan</code></a> associated with the subscription.</td>
</tr>
<tr>
<td>payment_method</td>
<td><code class="prettyprint">object</code></td>
<td>ID of already created payment method.</td>
</tr>
<tr>
<td>payments</td>
<td><code class="prettyprint">array</code></td>
<td>Array of <a href="#payments"><code class="prettyprint">Payment</code></a> associated with the subscription.</td>
</tr>
<tr>
<td>starting_date</td>
<td><code class="prettyprint">string</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is current date if missing</em></td>
</tr>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">string</code></td>
<td>End date of subscription, <code class="prettyprint">timestamp</code> format.</td>
</tr>
<tr>
<td>interval_total</td>
<td><code class="prettyprint">number</code></td>
<td>Number of intervals set in the <a href="#Plans"><code class="prettyprint">Plan</code></a> the subscription will run.</td>
</tr>
<tr>
<td>infinite</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the subscription will run until the user stops it.</td>
</tr>
<tr>
<td>current_billing_date_period_start</td>
<td><code class="prettyprint">string</code></td>
<td>The date on which the customer was billed last.</td>
</tr>
<tr>
<td>current_billing_date_period_end</td>
<td><code class="prettyprint">string</code></td>
<td>The date on which the customer will be billed next. This will also be the date on which the next current_billing_date_period_start of the subscription starts.</td>
</tr>
<tr>
<td>prorate_amount</td>
<td><code class="prettyprint">number</code></td>
<td>The amount prorated. Currency set in <a href="#Plans"><code class="prettyprint">Plan</code></a>.</td>
</tr>
<tr>
<td>prorate_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date of the last time an amount was prorated</td>
</tr>
<tr>
<td>last_billing_amount</td>
<td><code class="prettyprint">number</code></td>
<td>The amount that was subtracted at the last payment. <code class="prettyprint">plan.total_amount</code>+<code class="prettyprint">prorate_amount</code></td>
</tr>
<tr>
<td>total_fail_attempts</td>
<td><code class="prettyprint">number</code></td>
<td>The number of failed payment attempts in the subscription. See <a href="#Plans"><code class="prettyprint">Plan</code></a>`.max_fail_attempts</td>
</tr>
</tbody></table>

<h2 id="create-a-new-subscription">Create a New Subscription</h2>

<p>To create a new subscription, the user needs to have a plan associated with the
subscription. Additionally, the user needs to specify a subscription method.
This will not start the subscription, only create it.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/subscriptions
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/subscriptions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscription_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"license"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "company": {"$oid": "57ee9c71d76d431f8511142f"},</span>
<span class="s">    "active": true,</span>
<span class="s">    "status": "CREATED",</span>
<span class="s">    "name": "LICENSE",</span>
<span class="s">    "method": "license",</span>
<span class="s">    "_id": {"$oid": "5964a0ead57ba2036750a3b4"},</span>
<span class="s">    "deleted": false,</span>
<span class="s">    "prorate_amount": 0.0,</span>
<span class="s">    "_cls": "SubscriptionMethod.LicenseSubscription",</span>
<span class="s">    "plan": {"$oid": "5931697ed57ba271c0c7de66"},</span>
<span class="s">    "payments": [],</span>
<span class="s">    "infinite": false,</span>
<span class="s">    "created": {"$date": 1499767018360},</span>
<span class="s">    "user": {"$oid": "57ee9c72d76d431f85111432"},</span>
<span class="s">    "updated": {"$date": 1499767018360}</span>
</code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the <a href="#Plans"><code class="prettyprint">Plan</code></a> associated with the subscription.</td>
</tr>
<tr>
<td><strong>subscription_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Name of subscription method. <code class="prettyprint">license</code></td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>A short description.</td>
</tr>
<tr>
<td>start_now</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the subscription will start now.</td>
</tr>
</tbody></table>

<h2 id="start-subscription">Start Subscription</h2>

<p>To start a subscription, the user needs to first create a subscription.
The user could create and start the subscription in one API call. Then you
will have to add <code class="prettyprint">{&quot;start_now&quot;: true}</code> when creating a new subscription.
When starting the subscription, we need an associated payment_method in the request data.</p>

<p>A subscription could either have a set ending_date, where infinite = <code class="prettyprint">false</code>,
or not have an ending_date, where infinite = <code class="prettyprint">true</code>.
The ending date could be set by the user, either as an ending_date
or as number of interval_units from the starting_date to the ending_date.
If the user set more than one of the parameters
infinite, ending_date or interval_total, the API overrides the
parameters by: infinite &gt; ending_date &gt; interval_total.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/subscriptions/&lt;subscription_id&gt;/start
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/subscriptions/5964a0ead57ba2036750a3b4/start</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"prorate_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LICENSE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499768160086</span><span class="p">},</span><span class="w">
    </span><span class="s2">"_cls"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionMethod.LicenseSubscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"infinite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499854560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1511954560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_billing_date_period_end"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502532960000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_billing_date_period_start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499854560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"license"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>payment_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of an already created payment method.</td>
</tr>
<tr>
<td><strong>subscription_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Name of subscription method. <code class="prettyprint">license</code></td>
</tr>
<tr>
<td>starting_date</td>
<td><code class="prettyprint">string</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is current date if missing</em></td>
</tr>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">string</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format.</td>
</tr>
<tr>
<td>interval_total</td>
<td><code class="prettyprint">number</code></td>
<td>Number of intervals, set in the <a href="#Plans"><code class="prettyprint">Plan</code></a>, the subscription will run.</td>
</tr>
<tr>
<td>infinite</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the subscription will run until the user stops it.</td>
</tr>
</tbody></table>

<h2 id="create-subscription-with-a-pre-set-company-specific-plan">Create Subscription with a pre-set company specific Plan</h2>

<p>If your company only allows one type of <a href="#Plans"><code class="prettyprint">plan</code></a>, this method could be utilized.
The customer could add their <code class="prettyprint">plan.items</code> and name of the plan
when creating a new subscription, and the rest of the plan is set by the
company specifics.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/subscriptions
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/subscriptions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan Name"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;product_id&gt;"</span><span class="p">,</span><span class="w"> </span><span class="s2">"quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}],</span><span class="w">
          </span><span class="p">},</span><span class="w">
</span><span class="s2">"subscription_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"license"</span><span class="p">,</span><span class="w">
</span><span class="s2">"start_now"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
</span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "plan": {"$oid": "5931697ed57ba271c0c7de66"},</span>
<span class="s">    "payment_method": {"$oid": "&lt;payment-method-id&gt;"},</span>
<span class="s">    "user": {"$oid": "57ee9c72d76d431f85111432"},</span>
<span class="s">    "prorate_amount": 0.0,'</span>
<span class="s">    "name": "LICENSE",</span>
<span class="s">    "payments": [],</span>
<span class="s">    "status": "ACTIVE",</span>
<span class="s">    "active": true,</span>
<span class="s">    "updated": {"$date": 1499768160086},</span>
<span class="s">    "_cls": "SubscriptionMethod.LicenseSubscription",</span>
<span class="s">    "infinite": false,</span>
<span class="s">    "starting_date": {"$date": 1499854560000},</span>
<span class="s">    "ending_date": {"$date": 1511954560000},</span>
<span class="s">    "created": {"$date": 1499767018360},</span>
<span class="s">    "current_billing_date_period_end": {"$date": 1502532960000},</span>
<span class="s">    "current_billing_date_period_start": {"$date": 1499854560000},</span>
<span class="s">    "company": {"$oid": "57ee9c71d76d431f8511142f"},</span>
<span class="s">    "deleted": false,</span>
<span class="s">    "method": "license",</span>
<span class="s">    "_id": {"$oid": "5964a0ead57ba2036750a3b4"}</span>
<span class="s">}</span>
</code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>subscription_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Name of subscription method</td>
</tr>
<tr>
<td><strong>plan</strong></td>
<td><code class="prettyprint">array</code></td>
<td>An array with name and items regarding the <a href="#Plans"><code class="prettyprint">plan</code></a>.</td>
</tr>
<tr>
<td>start_now</td>
<td><code class="prettyprint">boolean</code></td>
<td>If true, the subscription will start now. Needs a payment_method if <code class="prettyprint">start_now</code> is true.</td>
</tr>
<tr>
<td>payment_method</td>
<td><code class="prettyprint">string</code></td>
<td>ID of an already created payment method.</td>
</tr>
<tr>
<td>starting_date</td>
<td><code class="prettyprint">string</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is current date if missing</em></td>
</tr>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">string</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format.</td>
</tr>
<tr>
<td>interval_total</td>
<td><code class="prettyprint">number</code></td>
<td>Number of intervals, set in the <a href="#Plans"><code class="prettyprint">Plan</code></a>, the subscription will run.</td>
</tr>
<tr>
<td>infinite</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the subscription will run until the user stops it.</td>
</tr>
</tbody></table>

<h2 id="update-subscription">Update Subscription</h2>

<p>The user could update certain fields in the subscription. If, when starting
the subscription, the user could only update one of the fields infinite, ending_date or interval_total, they could use this to update the fields.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/subscriptions/&lt;subscription_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/subscriptions/5964a0ead57ba2036750a3b4</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A note regarding the subscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"infinite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"prorate_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LICENSE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A note regarding the subscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ACTIVE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499773617984</span><span class="p">},</span><span class="w">
    </span><span class="s2">"_cls"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionMethod.LicenseSubscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"infinite"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499854560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_billing_date_period_end"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502532960000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_billing_date_period_start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499854560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"license"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>A short description</td>
</tr>
<tr>
<td>interval_total</td>
<td><code class="prettyprint">number</code></td>
<td>Number of intervals, set in the <a href="#Plans"><code class="prettyprint">Plan</code></a>, the subscription will run</td>
</tr>
<tr>
<td>infinite</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the subscription will run until the User stops it</td>
</tr>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">string</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format</td>
</tr>
<tr>
<td>payment_method</td>
<td><code class="prettyprint">string</code></td>
<td>ID of an already created payment method</td>
</tr>
</tbody></table>

<h2 id="stop-subscription">Stop Subscription</h2>

<p>To stop the subscription, the user could either choose to stop it on a chosen
<code class="prettyprint">ending_date</code> or, if missing, at the current time. The remaining amount will be prorated
to the user at the next <code class="prettyprint">current_billing_date_period_end</code> if <a href="#Plans"><code class="prettyprint">Plan</code></a>.<code class="prettyprint">prorate</code>
is <code class="prettyprint">true</code>.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/subscriptions/&lt;subscription_id&gt;/stop
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/subscriptions/5964a0ead57ba2036750a3b4/stop</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"prorate_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">-428.57</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LICENSE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A note regarding the subscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NON_RENEWING"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499773617984</span><span class="p">},</span><span class="w">
    </span><span class="s2">"_cls"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionMethod.LicenseSubscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"infinite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499854560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499860512000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_billing_date_period_end"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502532960000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_billing_date_period_start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499854560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"license"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">string</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format</td>
</tr>
</tbody></table>

<h2 id="receive-subscription-by-id">Receive Subscription by ID</h2>

<p>Receive a subscription, based on its ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/subscriptions/&lt;subscription_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/subscriptions/5964a0ead57ba2036750a3b4</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"payment_method"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;payment-method-id&gt;"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"prorate_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">-428.57</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LICENSE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">"A note regarding the subscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"payments"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NON_RENEWING"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499773617984</span><span class="p">},</span><span class="w">
    </span><span class="s2">"_cls"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SubscriptionMethod.LicenseSubscription"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"infinite"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"starting_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499854560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"ending_date"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499860512000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_billing_date_period_end"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1502532960000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"current_billing_date_period_start"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499854560000</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"license"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="get-all-subscriptions-for-a-user">Get All Subscriptions for a User</h2>

<p>Receives a list of all subscriptions associated with the user.
It is possible to add pagination to this request.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/users/&lt;user_id&gt;/subscriptions
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users/57ee9c72d76d431f85111432/subscriptions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td><code class="prettyprint">string</code></td>
<td>The ID for the user</td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the request also returns all deleted subscriptions</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of subscriptions per page <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve <em>default is 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used to sort results <em>default is <code class="prettyprint">-modified</code></em></td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>The subscription status <em>default is <code class="prettyprint">ACTIVE</code></em></td>
</tr>
</tbody></table>

<h2 id="get-all-subscriptions">Get All Subscriptions</h2>

<p>Receives a list of all subscriptions associated with a company.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/subscriptions
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/subscriptions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the request also returns all deleted subscriptions</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of subscriptions per page <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve <em>default is 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used to sort results <em>default is <code class="prettyprint">-modified</code></em></td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>The subscription status <em>default is <code class="prettyprint">ACTIVE</code></em></td>
</tr>
</tbody></table>

<h2 id="recurring-order-subscriptions-object">Recurring Order Subscriptions Object</h2>

<p>This type of subscription is used when you need to schedule some orders on a daily, weekly, or monthly basis.
See the <a href="#recurring-order-plan">`Recurring Order Plan</a> on how to create a plan for this subscription type.</p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><code class="prettyprint">object</code></td>
<td>The subscription ID.</td>
</tr>
<tr>
<td>method</td>
<td><code class="prettyprint">string</code></td>
<td>Name of subscription method. <code class="prettyprint">recurring_order</code></td>
</tr>
<tr>
<td>name</td>
<td><code class="prettyprint">string</code></td>
<td>The name of the subscription type. <em>default is <code class="prettyprint">RECURRING_ORDER</code></em></td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>A short note regarding the subscription.</td>
</tr>
<tr>
<td>user</td>
<td><code class="prettyprint">object</code></td>
<td><a href="#Users"><code class="prettyprint">User</code></a> associated with the subscription.</td>
</tr>
<tr>
<td>status</td>
<td><code class="prettyprint">string</code></td>
<td>Status for the subscription. This will change according to the subscription&rsquo;s state. <em>default is <code class="prettyprint">CREATED</code>, also available are <code class="prettyprint">ACTIVE</code>, <code class="prettyprint">FUTURE</code>, <code class="prettyprint">NON_RENEWING</code>and <code class="prettyprint">CANCELLED</code></em></td>
</tr>
<tr>
<td>plan</td>
<td><code class="prettyprint">object</code></td>
<td>The <a href="#recurring-order-plan"><code class="prettyprint">Recurring Order Plan</code></a> associated with the subscription.</td>
</tr>
<tr>
<td>payment_method</td>
<td><code class="prettyprint">object</code></td>
<td>The <a href="#payment-method"><code class="prettyprint">Payment Method</code></a> associated with the subscription.</td>
</tr>
<tr>
<td>payments</td>
<td><code class="prettyprint">array</code></td>
<td>Array of <a href="#payments"><code class="prettyprint">Payment</code></a> objects associated with the subscription.</td>
</tr>
<tr>
<td>starting_date</td>
<td><code class="prettyprint">string</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format.</td>
</tr>
<tr>
<td>ending_date</td>
<td><code class="prettyprint">string</code></td>
<td>End date of subscription, <code class="prettyprint">timestamp</code> format.</td>
</tr>
<tr>
<td>interval_total</td>
<td><code class="prettyprint">number</code></td>
<td>The total number of <a href="#Plans"><code class="prettyprint">Plan</code></a> intervals the subscription will run.</td>
</tr>
<tr>
<td>infinite</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the subscription will run until the user stops it.</td>
</tr>
<tr>
<td>current_billing_date_period_start</td>
<td><code class="prettyprint">string</code></td>
<td>The date on which the customer was billed last.</td>
</tr>
<tr>
<td>current_billing_date_period_end</td>
<td><code class="prettyprint">string</code></td>
<td>The date on which the customer will be billed next. This will also be the date on which the next current_billing_date_period_start of the subscription starts.</td>
</tr>
<tr>
<td>prorate_amount</td>
<td><code class="prettyprint">number</code></td>
<td>The amount prorated. Currency set in <a href="#Plans"><code class="prettyprint">Plan</code></a>.</td>
</tr>
<tr>
<td>prorate_date</td>
<td><code class="prettyprint">number</code></td>
<td>The date of the last time an amount was prorated</td>
</tr>
<tr>
<td>last_billing_amount</td>
<td><code class="prettyprint">number</code></td>
<td>The amount that was subtracted at the last payment. <code class="prettyprint">plan.total_amount</code>+<code class="prettyprint">prorate_amount</code></td>
</tr>
<tr>
<td>total_fail_attempts</td>
<td><code class="prettyprint">number</code></td>
<td>The number of failed payment attempts in the subscription. See <a href="#Plans"><code class="prettyprint">Plan</code></a>`.max_fail_attempts</td>
</tr>
<tr>
<td>initial_order</td>
<td><code class="prettyprint">object</code></td>
<td>The initial <a href="#Orders"><code class="prettyprint">Order</code></a> in the subscription. It is used to create a <a href="#recurring-order-plan"><code class="prettyprint">Recurring Order Plan</code></a></td>
</tr>
<tr>
<td>orders</td>
<td><code class="prettyprint">object</code></td>
<td>List of <a href="#Orders"><code class="prettyprint">Orders</code></a></td>
</tr>
</tbody></table>

<h2 id="create-a-new-subscription">Create a New Subscription</h2>

<p>To create a new subscription, the user needs to have a plan associated with the
subscription. Additionally, the user needs to specify a subscription method.
This will not start the subscription, only create it.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/subscriptions
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/subscriptions</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"plan"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5931697ed57ba271c0c7de66"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subscription_method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"recurring_order"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "company": {"$oid": "57ee9c71d76d431f8511142f"},</span>
<span class="s">    "active": true,</span>
<span class="s">    "status": "CREATED",</span>
<span class="s">    "name": "RECURRING_ORDER",</span>
<span class="s">    "method": "recurring_order",</span>
<span class="s">    "_id": {"$oid": "5964a0ead57ba2036750a3b4"},</span>
<span class="s">    "deleted": false,</span>
<span class="s">    "prorate_amount": 0.0,</span>
<span class="s">    "_cls": "SubscriptionMethod.LicenseSubscription",</span>
<span class="s">    "plan": {"$oid": "5931697ed57ba271c0c7de66"},</span>
<span class="s">    "payments": [],</span>
<span class="s">    "infinite": false,</span>
<span class="s">    "created": {"$date": 1499767018360},</span>
<span class="s">    "user": {"$oid": "57ee9c72d76d431f85111432"},</span>
<span class="s">    "updated": {"$date": 1499767018360}</span>
</code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>plan</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the <a href="#Plans"><code class="prettyprint">Plan</code></a> associated with the subscription.</td>
</tr>
<tr>
<td><strong>subscription_method</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Name of subscription method. <code class="prettyprint">license</code></td>
</tr>
<tr>
<td>note</td>
<td><code class="prettyprint">string</code></td>
<td>A short description.</td>
</tr>
<tr>
<td>start_now</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, the subscription will start now.</td>
</tr>
</tbody></table>

<h2 id="start-subscription">Start Subscription</h2>

<p>The user could create and start the subscription in one API call. Add <code class="prettyprint">{&quot;start_now&quot;: true}</code> to the JSON data when creating a new subscription. 
A payment method needs to be set before starting a subscription.
A subscription could either have a set ending_date, where infinite = <code class="prettyprint">false</code>,
or not have an ending_date, where infinite = <code class="prettyprint">true</code>.
The ending date could be set by the user, either as an ending_date
or as number of interval_units from the starting_date to the ending_date.
If the user set more than one of the parameters
infinite, ending_date or interval_total, the API overrides the
parameters by: infinite &gt; ending_date &gt; interval_total.</p>

          <h1 id="users">Users</h1>

<p>User is the class that holds all the CRUD functions for your customers and is the parent class to Provider.  </p>

<h2 id="user-object">User object</h2>

<table><thead>
<tr>
<th>Attributes</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>first_name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>First name of the user</td>
</tr>
<tr>
<td><strong>last_name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Last name of the user</td>
</tr>
<tr>
<td>email</td>
<td><code class="prettyprint">string</code></td>
<td>E-mail of the user</td>
</tr>
<tr>
<td>mobile_phone_number</td>
<td><code class="prettyprint">string</code></td>
<td>Phone number of the user</td>
</tr>
<tr>
<td>addresses</td>
<td><code class="prettyprint">array</code></td>
<td>An <code class="prettyprint">array</code>of <a href="#address"><code class="prettyprint">Addresses</code></a> associated with the user</td>
</tr>
<tr>
<td>billing_address</td>
<td><a href="#address"><code class="prettyprint">object</code></a></td>
<td>Billing Address of the user</td>
</tr>
<tr>
<td>bio</td>
<td><code class="prettyprint">string</code></td>
<td>Biographic note about the user</td>
</tr>
<tr>
<td>tags</td>
<td><code class="prettyprint">string</code></td>
<td>List of tags associated with user</td>
</tr>
<tr>
<td>roles</td>
<td><code class="prettyprint">string</code></td>
<td>List of roles associated with user</td>
</tr>
</tbody></table>

<h2 id="create-a-user">Create a User</h2>

<p>Creates a new user.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/users
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
             </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"addresses"</span><span class="p">:[{</span><span class="w">
                </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
             </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
  </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>first_name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>First name of the user</td>
</tr>
<tr>
<td><strong>last_name</strong></td>
<td><code class="prettyprint">string</code></td>
<td>Last name of the user</td>
</tr>
<tr>
<td>email</td>
<td><code class="prettyprint">string</code></td>
<td>E-mail of the user</td>
</tr>
<tr>
<td>mobile_phone_number</td>
<td><code class="prettyprint">string</code></td>
<td>Phone number of the user</td>
</tr>
<tr>
<td>billing_address</td>
<td><code class="prettyprint">object</code></td>
<td>Billing <a href="#address"><code class="prettyprint">Address</code></a> of the user</td>
</tr>
<tr>
<td>bio</td>
<td><code class="prettyprint">string</code></td>
<td>Biographic note about the user</td>
</tr>
<tr>
<td>tags</td>
<td><code class="prettyprint">array</code></td>
<td>List of tags associated with the user</td>
</tr>
</tbody></table>

<h2 id="create-a-user-with-a-jwt-token">Create a User with a JWT token</h2>

<p>See <a href="#authorization"><code class="prettyprint">Authorization</code></a> for how to get a JWT token.
With the route POST <code class="prettyprint">/v2/users</code>, you could both create a new user with a JWT token, and
log in a user with their JWT token.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/v2/users
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/v2/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"addresses"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Streetname 7"</span><span class="w">
             </span><span class="p">}]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"roles"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
    </span><span class="s2">"tags"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="s2">"auth0_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"some-id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"billing_address"</span><span class="p">:</span><span class="w">
        </span><span class="p">{</span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"google"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="p">},</span><span class="w">
    </span><span class="s2">"voucher"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b498e02b-2031-4d84-b55b-b460d22f44b4"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"consumed"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"initial_quantity"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1512383756277</span><span class="p">},</span><span class="w">
                </span><span class="s2">"expires"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1543919756277</span><span class="p">}},</span><span class="w">
    </span><span class="s2">"_cls"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1512383756277</span><span class="p">},</span><span class="w">
    </span><span class="s2">"addresses"</span><span class="p">:</span><span class="w">
        </span><span class="p">[{</span><span class="s2">"zip_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Streetname 7"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="p">,</span><span class="w">
        </span><span class="s2">"service"</span><span class="p">:</span><span class="w"> </span><span class="s2">"google"</span><span class="p">}],</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"national_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234567890"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"modified"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1512383756279</span><span class="p">},</span><span class="w">
    </span><span class="s2">"avatar"</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bio"</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="p">,</span><span class="w">
    </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="p">,</span><span class="w">
    </span><span class="s2">"note"</span><span class="p">:</span><span class="w"> </span><span class="s2">" "</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a25250cd57ba213edcba515"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"new_customer"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_login"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1512383756278</span><span class="p">},</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span><span class="w">

</span></code></pre>
<h2 id="retrieve-a-user">Retrieve a User</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/users/&lt;user-id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users/&lt;user-id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"addresses"</span><span class="p">:[{</span><span class="w">
                </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
             </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
  </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Retrieves a user with the given ID.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>user_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the desired user</td>
</tr>
</tbody></table>

<h2 id="update-a-user">Update a User</h2>

<p>Updates an existing user.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/users/&lt;user-id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/users/&lt;user-id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oliver"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"Oliver"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"addresses"</span><span class="p">:[{</span><span class="w">
                </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
             </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
  </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>user_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the user to update</td>
</tr>
<tr>
<td>first_name</td>
<td><code class="prettyprint">string</code></td>
<td>First name of the user</td>
</tr>
<tr>
<td>last_name</td>
<td><code class="prettyprint">string</code></td>
<td>Last name of the user</td>
</tr>
<tr>
<td>email</td>
<td><code class="prettyprint">string</code></td>
<td>E-mail of the user</td>
</tr>
<tr>
<td>mobile_phone_number</td>
<td><code class="prettyprint">string</code></td>
<td>Phone number of the user</td>
</tr>
<tr>
<td>billing_address</td>
<td><code class="prettyprint">object</code></td>
<td>Billing <a href="#address"><code class="prettyprint">Address</code></a> of the user</td>
</tr>
<tr>
<td>bio</td>
<td><code class="prettyprint">string</code></td>
<td>Biographic note about the user</td>
</tr>
<tr>
<td>tags</td>
<td><code class="prettyprint">array</code></td>
<td>List of tags associated with the user</td>
</tr>
</tbody></table>

<h2 id="delete-a-user">Delete a User</h2>

<p>Deletes a User.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE https://api.kvass.ai/users/&lt;user-id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/users/&lt;user-id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"addresses"</span><span class="p">:[{</span><span class="w">
                </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
             </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
  </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>user_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the user to delete</td>
</tr>
</tbody></table>

<h2 id="list-all-users">List All Users</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/users
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"addresses"</span><span class="p">:[{</span><span class="w">
                </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
             </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
  </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all users associated with a company.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve <em>default size is 50</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve <em>default page 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results <em>default is <code class="prettyprint">last_name</code></em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used to filter results <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted users are also listed <em>default is <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

<h2 id="search-user">Search User</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/users/search
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users/search?query=doe</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"_id"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c72d76d431f85111432"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"_cls"</span><span class="p">:</span><span class="s2">"User"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903950</span><span class="p">},</span><span class="w">
  </span><span class="s2">"modified"</span><span class="p">:{</span><span class="s2">"$date"</span><span class="p">:</span><span class="mi">1475428903951</span><span class="p">},</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@email.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"mobile_phone_number"</span><span class="p">:</span><span class="s2">"+4712345678"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"addresses"</span><span class="p">:[{</span><span class="w">
                </span><span class="s2">"city"</span><span class="p">:</span><span class="s2">"Danielsen"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"service"</span><span class="p">:</span><span class="s2">"google"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"alias"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="s2">"country"</span><span class="p">:</span><span class="s2">"Paraguay"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"zip_code"</span><span class="p">:</span><span class="s2">"0556"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"state"</span><span class="p">:</span><span class="s2">"Oslo"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"street_name"</span><span class="p">:</span><span class="s2">"Iversenstien 7"</span><span class="w">
             </span><span class="p">}],</span><span class="w">
  </span><span class="s2">"billing_address"</span><span class="p">:{},</span><span class="w">
  </span><span class="s2">"bio"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"note"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"avatar"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"company"</span><span class="p">:{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
  </span><span class="s2">"tags"</span><span class="p">:[],</span><span class="w">
  </span><span class="s2">"stripe_customer_id"</span><span class="p">:</span><span class="s2">""</span><span class="p">,</span><span class="w">
  </span><span class="s2">"roles"</span><span class="p">:[</span><span class="s2">"user"</span><span class="p">],</span><span class="w">
  </span><span class="s2">"deleted"</span><span class="p">:</span><span class="kc">false</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of users whose first or last name matches a given query.</p>

<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>query</td>
<td><code class="prettyprint">string</code></td>
<td>What you want to search, e.g., <strong>first name</strong>, <strong>last name</strong> or <strong>id</strong></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve <em>default is 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results  <em>default is <code class="prettyprint">-created</code> if missing; other parameters in the user model could be used, e.g., &ldquo;last_name&rdquo; or &ldquo;first_name&rdquo;</em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format <em>default is <code class="prettyprint">None</code></em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used to filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted users are also listed <em>default is <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

<h2 id="list-all-orders-for-a-user">List All Orders for a User</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/users/&lt;user-id&gt;/orders
</code></pre>
<blockquote>
<p>Example request:
<code class="prettyprint">http
GET /users/&lt;user-id&gt;/orders HTTP/1.1
Content-Type: application/json
Authorization: Bearer &lt;jwt&gt;
X-Kvass-Api-Key: &lt;kvass-api-key&gt;
Host: api.kvass.ai
</code></p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
  </span><span class="p">{}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Retrieves a list of all orders associated with a given user.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>user_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the user to retrieve Orders for.</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve.</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is current date minus 15 days</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default current date plus 15 days</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used to filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>order_status</td>
<td><code class="prettyprint">string</code></td>
<td>Orders with a specific status are also listed. Values can be separated by a comma, e.g., &ldquo;success, processing&rdquo;.</td>
</tr>
<tr>
<td>delivery_status</td>
<td><code class="prettyprint">string</code></td>
<td>Orders with a specific delivery status are also listed. Values can be separated by a comma, e.g.,  &ldquo;assigning, done, created.&rdquo;</td>
</tr>
</tbody></table>

<h3 id="order_status">order_status</h3>

<table><thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>CREATED</td>
<td>Order has been created</td>
</tr>
<tr>
<td>PROCESSING</td>
<td>Order is being processed</td>
</tr>
<tr>
<td>DECLINED</td>
<td>Order has been declined for a particular reason</td>
</tr>
<tr>
<td>FAILED</td>
<td>Order has failed for a particular reason</td>
</tr>
<tr>
<td>SUCCESS</td>
<td>Order succeeded</td>
</tr>
<tr>
<td>CANCELLED</td>
<td>Order has been cancelled</td>
</tr>
</tbody></table>

<h3 id="delivery_status">delivery_status</h3>

<table><thead>
<tr>
<th>Arguments</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>CREATED</td>
<td>Delivery has been created</td>
</tr>
<tr>
<td>PENDING</td>
<td>Delivery is pending</td>
</tr>
<tr>
<td>PROCESSING</td>
<td>Delivery is being processed</td>
</tr>
<tr>
<td>ASSIGNING</td>
<td>Delivery is being assigned to a provider</td>
</tr>
<tr>
<td>PICKUP_STARTED</td>
<td>Pickup for the package has been sent</td>
</tr>
<tr>
<td>PICKUP_ARRIVED</td>
<td>Pickup for the package has arrived</td>
</tr>
<tr>
<td>DROPOFF_STARTED</td>
<td>The package has been sent to be dropped off</td>
</tr>
<tr>
<td>DROPOFF_ARRIVED</td>
<td>The package has been dropped off</td>
</tr>
<tr>
<td>CANCELLED</td>
<td>Delivery is cancelled</td>
</tr>
<tr>
<td>DONE</td>
<td>Delivery is done</td>
</tr>
<tr>
<td>UNKNOWN</td>
<td>Delivery status is unknown</td>
</tr>
<tr>
<td>QUEUED</td>
<td>Delivery is in queue</td>
</tr>
</tbody></table>

<h2 id="list-all-payment-methods-for-a-user">List All Payment Methods for a User</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/users/&lt;user-id&gt;/payment_methods
</code></pre>
<blockquote>
<p>Example request:
<code class="prettyprint">http
GET /users/&lt;user-id&gt;/payment_methods HTTP/1.1
Content-Type: application/json
Authorization: Bearer &lt;jwt&gt;
X-Kvass-Api-Key: &lt;kvass-api-key&gt;
Host: api.kvass.ai
</code></p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">[</span>
<span class="s">    {</span>
<span class="s">       "_id":{"$oid":&lt;payment-method-id&gt;},</span>
<span class="s">       "_cls":"PaymentMethod.StripePaymentMethod",</span>
<span class="s">       "created":{"$date":1538058324877},</span>
<span class="s">       "modified":{"$date":1538058327405},</span>
<span class="s">       "deleted":false,</span>
<span class="s">       "active":true,</span>
<span class="s">       "user":{"$oid":"57ee9c72d76d431f85111432"},</span>
<span class="s">       "company":{"$oid":"591ee15db70e2a10acb65362"},</span>
<span class="s">       "name":"Stripe",</span>
<span class="s">       "method":"stripe",</span>
<span class="s">       "token":"tok_1DF0QiEeeXxFpLJtthyCQWVz",</span>
<span class="s">       "customer_id":"cus_DgNBPtNphW2W7r",</span>
<span class="s">       "card":{</span>
<span class="s">          "id":"card_1DF0QiEeeXxFpLJtg4AE1T5z",</span>
<span class="s">          "object":"card",</span>
<span class="s">          "address_city":null,</span>
<span class="s">          "address_country":null,</span>
<span class="s">          "address_line1":null,</span>
<span class="s">          "address_line1_check":null,</span>
<span class="s">          "address_line2":null,</span>
<span class="s">          "address_state":null,</span>
<span class="s">          "address_zip":null,</span>
<span class="s">          "address_zip_check":null,</span>
<span class="s">          "brand":"Visa",</span>
<span class="s">          "country":"US",</span>
<span class="s">          "cvc_check":"unchecked",</span>
<span class="s">          "dynamic_last4":null,</span>
<span class="s">          "exp_month":12,</span>
<span class="s">          "exp_year":2019,</span>
<span class="s">          "fingerprint":"npPw68vQg1usKUWb",</span>
<span class="s">          "funding":"credit",</span>
<span class="s">          "last4":"4242",</span>
<span class="s">          "metadata":{},</span>
<span class="s">          "name":null,</span>
<span class="s">          "tokenization_method":null</span>
<span class="s">       }</span>
<span class="s">    }</span>
<span class="s">]</span>
</code></pre>
<p>Retrieves a list of all <a href="#payment_methods">Payments Method</a> associated with a given user id.</p>

<table><thead>
<tr>
<th>Arguments</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>user_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the user to retrieve Orders for.</td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of items to retrieve.</td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve. <em>default is 10</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used for sorting results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>from_date</td>
<td><code class="prettyprint">number</code></td>
<td>Start date, <code class="prettyprint">timestamp</code> format. <em>default is current date minus 15 days</em></td>
</tr>
<tr>
<td>to_date</td>
<td><code class="prettyprint">number</code></td>
<td>End date, <code class="prettyprint">timestamp</code> format. <em>default current date plus 15 days</em></td>
</tr>
<tr>
<td>date_filter</td>
<td><code class="prettyprint">string</code></td>
<td>Date field used to filter results. <em>default is <code class="prettyprint">created</code></em></td>
</tr>
<tr>
<td>include_deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>If <code class="prettyprint">true</code>, deleted users are also listed <em>default is <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

          <h1 id="webhooks">Webhooks</h1>

<p>Webhooks allow you to keep track of your data without having to constantly poll our APIs for updates.</p>

<h2 id="webhook-object">Webhook Object</h2>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_id</td>
<td><code class="prettyprint">object</code></td>
<td>The subscription ID.</td>
</tr>
<tr>
<td>event_type</td>
<td><code class="prettyprint">string</code></td>
<td>The type of <a href="#events"><code class="prettyprint">Event</code></a>. Can be any from the <a href="#list-of-event-types"><code class="prettyprint">event type list</code></a></td>
</tr>
<tr>
<td>endpoint</td>
<td><code class="prettyprint">string</code></td>
<td>The URL to call when the webhook is triggered</td>
</tr>
<tr>
<td>secret</td>
<td><code class="prettyprint">string</code></td>
<td>A SHA-256 secret used to secure the webhook communication</td>
</tr>
<tr>
<td>active</td>
<td><code class="prettyprint">boolean</code></td>
<td>Sets if related <code class="prettyprint">Events</code> is dispatched. <em>Default is <code class="prettyprint">true</code></em></td>
</tr>
<tr>
<td>deleted</td>
<td><code class="prettyprint">boolean</code></td>
<td>Whether the webhook is deleted <em>Default is <code class="prettyprint">false</code></em></td>
</tr>
<tr>
<td>verified</td>
<td><code class="prettyprint">boolean</code></td>
<td>Whether the webhook endpoint is verified. <em>Default is <code class="prettyprint">false</code></em></td>
</tr>
</tbody></table>

<h2 id="create-a-webhook">Create a Webhook</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/webhooks
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/webhooks</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://requestbin.fullcontact.com/asdfasdf"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "_id": {"$oid": "5964a0ead57ba2036750a3b4"},</span>
<span class="s">    "company": {"$oid": "57ee9c71d76d431f8511142f"},</span>
<span class="s">    "created": {"$date": 1499767018360},</span>
<span class="s">    "updated": {"$date": 1499767018360},</span>
<span class="s">    "event_type": "order.created",</span>
<span class="s">    "deleted": false,</span>
<span class="s">    "secret": "ed06e2f4e7bdb5ee6050695aba5ed3f2725fd3394df22f3a8a0c2856123a",</span>
<span class="s">    "endpoint": "http://requestbin.fullcontact.com/1o2mfpb1",</span>
<span class="s">    "verified": false,</span>
<span class="s">    "active": true</span>
<span class="s">}</span>
</code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>event_type</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The type of <a href="#events"><code class="prettyprint">Event</code></a>. Can be any from the <a href="#list-of-event-types"><code class="prettyprint">event type list</code></a></td>
</tr>
<tr>
<td><strong>endpoint</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The URL to call when the webhook is triggered</td>
</tr>
</tbody></table>

<h2 id="update-webhook">Update Webhook</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>PUT https://api.kvass.ai/webhooks/&lt;webhook_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">PUT</span> <span class="nn">/webhooks/5964a0ead57ba2036750a3b4</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.google.com"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="s">{</span>
<span class="s">    "_id": {"$oid": "5964a0ead57ba2036750a3b4"},</span>
<span class="s">    "company": {"$oid": "57ee9c71d76d431f8511142f"},</span>
<span class="s">    "created": {"$date": 1499767018360},</span>
<span class="s">    "updated": {"$date": 1499767018360},</span>
<span class="s">    "event_type": "order.created",</span>
<span class="s">    "deleted": false,</span>
<span class="s">    "secret": "ed06e2f4e7bdb5ee6050695aba5ed3f2725fd3394df22f3a8a0c2856123a",</span>
<span class="s">    "endpoint": "https://www.google.com",</span>
<span class="s">    "verified": false,</span>
<span class="s">    "active": true</span>
<span class="s">}</span>
</code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>event_type</td>
<td><code class="prettyprint">string</code></td>
<td>The type of <a href="#events"><code class="prettyprint">Event</code></a>. Can be any from the <a href="#list-of-event-types"><code class="prettyprint">event type list</code></a></td>
</tr>
<tr>
<td>endpoint</td>
<td><code class="prettyprint">string</code></td>
<td>The URL to call when the webhook is triggered</td>
</tr>
</tbody></table>

<p>Note that if the <code class="prettyprint">endpoint</code> is updated, then you will need to <a href="#verify-the-webhook">verify</a> the webhook
before related <code class="prettyprint">Events</code> is dispatched.</p>

<h2 id="receive-webhook-by-id">Receive Webhook by ID</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/webhooks/&lt;webhook_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/webhooks/5964a0ead57ba2036750a3b4</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ed06e2f4e7bdb5ee6050695aba5ed3f2725fd3394df22f3a8a0c2856123a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.google.com"</span><span class="p">,</span><span class="w">    
    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="get-all-webhooks">Get All Webhooks</h2>

<p>Receives a list of all webhooks associated with a company.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/webhooks
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/webhooks</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
        </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
        </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
        </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ed06e2f4e7bdb5ee6050695aba5ed3f2725fd3394df22f3a8a0c2856123a"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.google.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>Number of subscriptions per page <em>default is 10</em></td>
</tr>
<tr>
<td>page</td>
<td><code class="prettyprint">number</code></td>
<td>Which page to retrieve <em>default is 0</em></td>
</tr>
<tr>
<td>sort</td>
<td><code class="prettyprint">string</code></td>
<td>Field used to sort results <em>default is <code class="prettyprint">-modified</code></em></td>
</tr>
</tbody></table>

<h2 id="delete-webhook">Delete webhook</h2>

<p>Deletes a webhook with a given ID.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>DELETE https://api.kvass.ai/webhooks/&lt;webhook_id&gt;
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">DELETE</span> <span class="nn">/webhooks/&lt;webhook_id&gt;</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ed06e2f4e7bdb5ee6050695aba5ed3f2725fd3394df22f3a8a0c2856123a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.google.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>Argument</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>webhook_id</strong></td>
<td><code class="prettyprint">string</code></td>
<td>ID of the Webhook</td>
</tr>
</tbody></table>

<h2 id="verify-the-webhook">Verify the Webhook</h2>

<p>The webhook has to verified before related data on related <code class="prettyprint">Events</code> is dispatched. KVASS tries
to verify the endpoint when the webhook is created. If the endpoint returns an HTTP status code
2XX, then the webhook is set to <code class="prettyprint">verified</code>.</p>

<p>If an endpoint is updated, then the webhook is not verified anymore. It is possible to manually try to verify
the endpoint by doing the following request.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/webhooks/&lt;webhook_id&gt;/verify
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/webhooks/&lt;webhook_id&gt;/verify</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Share-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
    </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5964a0ead57ba2036750a3b4"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"company"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$oid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"57ee9c71d76d431f8511142f"</span><span class="p">},</span><span class="w">
    </span><span class="s2">"created"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"updated"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="s2">"$date"</span><span class="p">:</span><span class="w"> </span><span class="mi">1499767018360</span><span class="p">},</span><span class="w">
    </span><span class="s2">"event_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"order.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ed06e2f4e7bdb5ee6050695aba5ed3f2725fd3394df22f3a8a0c2856123a"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"endpoint"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://www.google.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"verified"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="simulate-a-webhook">Simulate a Webhook</h2>

<p>It is possible to simulate the response from a webhook to check the format of the webhook data.
KVASS will trigger a fake event related to the webhook type and send the data to the endpoint
specified in the webhook.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/webhooks/&lt;webhook_id&gt;/simulate
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/webhooks/&lt;webhook_id&gt;/simulate</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Share-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">204</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{}</span><span class="w">
</span></code></pre>
          <h1 id="data-science-labs">Data Science Labs</h1>

<p>The lab is where the magic happens. This is the integration endpoints to the Kvass data science platform.</p>

<h2 id="check-server-health">Check Server Health</h2>

<p>Checks whether or not the Kvass Data Science platform is running.</p>

<p>Returns <code class="prettyprint">{&#39;status&#39;: &#39;UP&#39;}</code> if server is running and <code class="prettyprint">{&#39;status&#39;: &#39;DOWN&#39;}</code> if not.</p>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>GET https://api.kvass.ai/labs/health
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/labs/health</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>
</code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UP"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h2 id="train-recommendation-model">Train Recommendation Model</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/labs/recommendations/train
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/labs/recommendations/train</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"model_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"content_recommender-user-product"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
</code></pre>
<p>This endpoint trains a specific recommendation engine model based on the <a href="#list-of-model-types"><code class="prettyprint">model type</code></a> in the request. </p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>model_type</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The model type which you want trained <em>Required field</em></td>
</tr>
</tbody></table>

<p></n> </n><br>
<aside class="notice">This is necessary to do before getting recommendations and similarities.</aside></p>

<h2 id="recommendation-labs">Recommendation Labs</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/labs/recommendations/recommend
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/labs/recommendations/recommend</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"model_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"content_recommender-user-product"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"size"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
   </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id&gt;"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product 1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id from request&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rank"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product 2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id from request&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rank"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product 3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;id from request&gt;"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rank"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Get recommendations based on model type in the request. The recommendations are ranked in the array
by the field <code class="prettyprint">rank</code>. The higher the rank, the higher the subjects recommendation. </p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>model_type</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The <a href="#list-of-model-types"><code class="prettyprint">model type</code></a> <em>Required field</em></td>
</tr>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The ID of the queried subject, to which you want recommendations for <em>Required field</em></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>The number of recommendations in the results <em>Default is 3</em></td>
</tr>
</tbody></table>

<h2 id="similarity-labs">Similarity Labs</h2>

<blockquote>
<p>Definition</p>
</blockquote>
<pre class="highlight plaintext"><code>POST https://api.kvass.ai/labs/recommendations/similar
</code></pre>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/labs/recommendations/similar</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer &lt;jwt&gt;</span>
<span class="na">X-Kvass-Api-Key</span><span class="p">:</span> <span class="s">&lt;kvass-api-key&gt;</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.kvass.ai</span>

<span class="p">{</span><span class="w">
   </span><span class="s2">"model_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"content_similarity_graph-product-product"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"number_of_recommendations"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
   </span><span class="s2">"features"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"tags"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product 1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.98</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rank"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product 2"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.95</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rank"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Product 3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.91</span><span class="p">,</span><span class="w">
        </span><span class="s2">"rank"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Get similarities and the degree of similarity for a given subject, like a <a href="#products"><code class="prettyprint">product</code></a>. 
The results in the array are ranked after the field <code class="prettyprint">rank</code>. 
The <code class="prettyprint">distance</code> is the degree of similarity to the initial subject. </p>

<table><thead>
<tr>
<th>Attribute</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><strong>model_type</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The <a href="#list-of-model-types"><code class="prettyprint">model type</code></a> <em>Required field</em></td>
</tr>
<tr>
<td><strong>features</strong></td>
<td><code class="prettyprint">string</code></td>
<td>An array of features <em>Required field</em></td>
</tr>
<tr>
<td><strong>query</strong></td>
<td><code class="prettyprint">string</code></td>
<td>The ID of the queried subject, to which you want similarity to <em>Required field</em></td>
</tr>
<tr>
<td>size</td>
<td><code class="prettyprint">number</code></td>
<td>The number of recommendations in the results <em>Default is 3</em></td>
</tr>
</tbody></table>

<h2 id="list-of-model-types">List of Model Types</h2>

<table><thead>
<tr>
<th>Model name</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">content_recommender-user-product</code></td>
<td>Product recommendations for a user</td>
</tr>
<tr>
<td><code class="prettyprint">content_similarity_graph-product-product</code></td>
<td>Similar products for a product</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
          </div>
      </div>
    </div>
    <script>

    </script>
  </body>
</html>
